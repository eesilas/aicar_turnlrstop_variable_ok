{"entries":[{"timestamp":1747900631898,"editorVersion":"7.0.61","changes":[{"type":"edited","filename":"main.blocks","patch":[{"diffs":[[0,"id=\""],[-1,":$KPo@/4n:GX3O]dQU*^\">FORWARD_SPEED</variable><variable id=\"YC4i.X#CZ_](-YHLVd.m\">TURN_BACKWARD_SPEED</variable><variable id=\"hJQ-7zKd7PK[U/7ET|XO\">TURN_FORWARD_SPEED</variable><variable id=\"hiZ{?/~,#3KK?A8w5Yh.\">STOP_SPEED</variable><variable id=\":Wf(EBl2YEK]}?V3O]W@\">state</variable><variable id=\"#RR*;zUcUMEVyqIt;W$8\">currentTag</variable><variable id=\"(9Kz#,XslZTXX[$HTKV_\">lastTag</variable><variable id=\"fuq+,c{d0)ZA9^E@eV.d\">tagCount</variable><variable id=\"V_ub5hIRHvzWOlrQioLy\">TAG_STABILITY_COUNT</variable><variable id=\"2MKCZy_6io]|*.5C.pqc\">FORWARD_DURATION</variable><variable id=\"dBPK$bB{G^EhY}_V]kRw\">TURN_DURATION</variable><variable id=\"EZot|CD?1oTjRHJFNH6}\">LOOP_INTERVAL</variable></variables><comment id=\"[o_9G5L|H}dK:GP$J.:N\" x=\"2034\" y=\"1721\" w=\"187\" h=\"120\">\n狀態機：0=等待，1=前進，2=轉彎\n</comment><block type=\"pxt-on-start\" id=\"y(1_uB1DOxH{ceJ-I2lU\" x=\"20\" y=\"20\"><statement name=\"HANDLER\"><block type=\"variables_set\" id=\"z3-TYui6^u3Af5:C%U_`\"><field name=\"VAR\" id=\":$KPo@/4n:GX3O]dQU*^\">FORWARD_SPEED</field><comment pinned=\"false\" h=\"80\" w=\"160\">電機速度常數\n前進速度</comment><value name=\"VALUE\"><shadow type=\"math_number\" id=\"p`k;=~4BcCO)6NWNGdTf\"><field name=\"NUM\">105</field></shadow></value><next><block type=\"variables_set\" id=\"twn-%))[I`Ov]-8^|(O[\"><field name=\"VAR\" id=\"hJQ-7zKd7PK[U/7ET|XO\">TURN_FORWARD_SPEED</field><comment pinned=\"false\" h=\"80\" w=\"160\">轉彎正向速度（增強動力）</comment><value name=\"VALUE\"><shadow type=\"math_number\" id=\"KTe6a+Bw*t0Rk!k!1yPE\"><field name=\"NUM\">150</field></shadow></value><next><block type=\"variables_set\" id=\"1_QuTdz+E#5G1c!}uIpB\"><field name=\"VAR\" id=\"YC4i.X#CZ_](-YHLVd.m\">TURN_BACKWARD_SPEED</field><comment pinned=\"false\" h=\"80\" w=\"160\">轉彎反向速度（增強動力）</comment><value name=\"VALUE\"><shadow type=\"math_number\" id=\"F$ZTE)P4{1Ama;UO$fil\"><field name=\"NUM\">-150</field></shadow></value><next><block type=\"variables_set\" id=\"$aL7;PnP%g4w(mYjPm|v\"><field name=\"VAR\" id=\"dBPK$bB{G^EhY}_V]kRw\">TURN_DURATION</field><comment pinned=\"false\" h=\"80\" w=\"160\">停止速度\n轉彎持續時間（毫秒，校準為90度原地旋轉）</comment><value name=\"VALUE\"><shadow type=\"math_number\" id=\"umP9/?m!PnN0EwFY:ZE`\"><field name=\"NUM\">600</field></shadow></value><next><block type=\"variables_set\" id=\"Wu5/,j:?6Q;4y?))W0P7\"><field name=\"VAR\" id=\"2MKCZy_6io]|*.5C.pqc\">FORWARD_DURATION</field><comment pinned=\"false\" h=\"80\" w=\"160\">前進持續時間（毫秒）</comment><value name=\"VALUE\"><shadow type=\"math_number\" id=\"`dpRy?gmcxdFcP^|.}:N\"><field name=\"NUM\">1000</field></shadow></value><next><block type=\"variables_set\" id=\"3ziCz~?+^K7OaH`7?Xpz\"><field name=\"VAR\" id=\"EZot|CD?1oTjRHJFNH6}\">LOOP_INTERVAL</field><comment pinned=\"false\" h=\"80\" w=\"160\">主循環刷新間隔（毫秒）</comment><value name=\"VALUE\"><shadow type=\"math_number\" id=\"5rl*^{?MjkMGBCbGGB:Y\"><field name=\"NUM\">1000</field></shadow></value><next><block type=\"variables_set\" id=\"v++(t:^TLm;S|*TUeDm/\"><field name=\"VAR\" id=\"V_ub5hIRHvzWOlrQioLy\">TAG_STABILITY_COUNT</field><comment pinned=\"false\" h=\"80\" w=\"160\">標籤連續檢測次數</comment><value name=\"VALUE\"><shadow type=\"math_number\" id=\"oA9p1y?XP7?iYP;a,CaI\"><field name=\"NUM\">2</field></shadow></value><next><block type=\"basic_show_icon\" id=\"w3I{Yx*?Lmz!*q6{uc=^\"><field name=\"i\">IconNames.Yes</field><comment pinned=\"false\" h=\"80\" w=\"160\">初始化\n顯示\"對勾\"表示初始化成功</comment><next><block type=\"huskylens_initI2c\" id=\"qyC]fPGL7/xs)uuVsTdu\"><comment pinned=\"false\" h=\"80\" w=\"160\">初始化Huskylens的I2C通信</comment><next><block type=\"huskylens_writeName\" id=\"[(|ldWCq{Vhx~$i+2,I*\"><comment pinned=\"false\" h=\"80\" w=\"160\">設置標籤名稱</comment><value name=\"id\"><shadow type=\"math_number\" id=\"%riRwyTRLK5N`-F885Vi\"><field name=\"NUM\">1</field></shadow></value><value name=\"name\"><shadow type=\"text\" id=\"V7+6CXOcWiUODzNQ7z9u\"><field name=\"TEXT\">Forward</field></shadow></value><next><block type=\"huskylens_writeName\" id=\"r2!y7T_0~DlG1c]M0mi+\"><comment pinned=\"false\" h=\"80\" w=\"160\">原地左轉90度</comment><value name=\"id\"><shadow type=\"math_number\" id=\"P1_|xc3h~8_iC/W(:s*b\"><field name=\"NUM\">2</field></shadow></value><value name=\"name\"><shadow type=\"text\" id=\"`a]/|/Np,eI!gUlqQ/-,\"><field name=\"TEXT\">Turn Left</field></shadow></value><next><block type=\"huskylens_writeName\" id=\"gfGou0SC#|!)K$Kc9juP\"><comment pinned=\"false\" h=\"80\" w=\"160\">原地右轉90度</comment><value name=\"id\"><shadow type=\"math_number\" id=\"ktMi71SiT|CX-2X4U(vi\"><field name=\"NUM\">3</field></shadow></value><value name=\"name\"><shadow type=\"text\" id=\";8dXwT/Jg33VSk`DQa1.\"><field name=\"TEXT\">Turn Right</field></shadow></value><next><block type=\"controls_if\" id=\"9?Im,BIMQ6`ei*nYv/3:\"><data>{\"commentRefs\":[],\"fieldData\":{}}</data><value name=\"IF0\"><shadow type=\"logic_boolean\" id=\"T`AS|-agq0}UU-+4i%~=\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_negate\" id=\"skrVKZb:YKJjf?.j5i^P\"><value name=\"BOOL\"><shadow type=\"logic_boolean\" id=\"DL2G7SYe$K.(`v?CDjOA\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"typescript_expression\" id=\"NiPQI_t=#3xwngF@e+,2\"><field name=\"EXPRESSION\">huskylens.initMode(protocolAlgorithm.OBJECTCLASSIFICATION)</field></block></value></block></value><statement name=\"DO0\"><block type=\"function_call\" id=\"H0C-l*D.e,b=m3$+(s1m\"><mutation name=\"showError\" functionid=\"]dA*|K/Le;g(TYE5y^OP\"></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">初始化失敗，顯示錯誤並停止</comment><next><block type=\"typescript_statement\" id=\";U!jxbiUKg~N1|?=s[/}\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"basic.forever(() =&gt; { });\" numlines=\"1\"></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">進入空循環，停止程序</comment></block></next></block></statement><next><block type=\"variables_set\" id=\"+-HUQpW)Pd^LMnPdXH6v\"><field name=\"VAR\" id=\"(9Kz#,XslZTXX[$HTKV_\">lastTag</field><comment pinned=\"false\" h=\"80\" w=\"160\">連續檢測計數器\n上次檢測的標籤ID</comment><value name=\"VALUE\"><shadow type=\"math_number\" id=\"JHBgM)RT::K+w~2j86wH\"><field name=\"NUM\">-1</field></shadow></value></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type=\"device_forever\" id=\"Qi]*-h+N@U1ELaI,3#3f\" x=\"732\" y=\"20\"><comment pinned=\"false\" h=\"80\" w=\"160\">上次檢測的標籤ID\n主循環</comment><statement name=\"HANDLER\"><block type=\"huskylens_request\" id=\"~jcyu[}iR4)xTZpGbhLT\"><comment pinned=\"false\" h=\"80\" w=\"160\">獲取Huskylens數據</comment><next><block type=\"controls_if\" id=\"ix%4bT)y9)yqM}`NhUD2\"><mutation elseif=\"2\"></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">狀態機邏輯</comment><value name=\"IF0\"><shadow type=\"logic_boolean\" id=\"`3X_|]0%6BGv-i_.F-VK\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\" id=\"AxINjP4DaYVLiGRy#%t]\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\" id=\"LTFD/*}eTIRj[I]~@^{s\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\" id=\"wd%3%eh?e:l.`.*pse7_\"><field name=\"VAR\" id=\":Wf(EBl2YEK]}?V3O]W@\">state</field></block></value><value name=\"B\"><shadow type=\"math_number\" id=\"z}TK2;*5x=%!/hPY9;X[\"><field name=\"NUM\">0</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"typescript_statement\" id=\"h$z^KN/2dk{1Tpr_*@}c\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"let currentTag = huskylens.isAppear(1, HUSKYLENSResultType_t.HUSKYLENSResultBlock) ? 1 :\" line1=\"            huskylens.isAppear(2, HUSKYLENSResultType_t.HUSKYLENSResultBlock) ? 2 :\" line2=\"                huskylens.isAppear(3, HUSKYLENSResultType_t.HUSKYLENSResultBlock) ? 3 : -1;\" numlines=\"3\" declaredvars=\"currentTag\"></mutation><next><block type=\"controls_if\" id=\"#@m+XHPy`3d{YH*HEb56\"><mutation else=\"1\"></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">檢查標籤穩定性</comment><value name=\"IF0\"><shadow type=\"logic_boolean\" id=\"^R.+x]8w/s_F+Sk}6]14\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_operation\" id=\"i[BK6?4vYM`KVIKn1ar|\"><field name=\"OP\">AND</field><value name=\"A\"><shadow type=\"logic_boolean\" id=\"l1mSdF,i]w-i:F0;flde\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\" id=\"cf~?%6bO!Prc$Kda3S)?\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\" id=\"wTC+-zIy52nxMSxkaGlC\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\" id=\"p3{lvrycA}}l*5-:(hr%\"><field name=\"VAR\" id=\"#RR*;zUcUMEVyqIt;W$8\">currentTag</field></block></value><value name=\"B\"><shadow type=\"math_number\" id=\"85X/y8D63#Hn5dCr8zwa\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\" id=\"Y.iU}Wov.0:how=}L]=l\"><field name=\"VAR\" id=\"(9Kz#,XslZTXX[$HTKV_\">lastTag</field></block></value></block></value><value name=\"B\"><shadow type=\"logic_boolean\" id=\"H3J6|,*gZj:-(yt+jqXg\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\" id=\"U_Y0w0Y3E0MQ$F;sD]/$\"><field name=\"OP\">NEQ</field><value name=\"A\"><shadow type=\"math_number\" id=\";`=QQ}Zj*Oj+lk?|j2~N\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\" id=\"IF,rRQ,8U#U}pIwCKW,H\"><field name=\"VAR\" id=\"#RR*;zUcUMEVyqIt;W$8\">currentTag</field></block></value><value name=\"B\"><shadow type=\"math_number\" id=\"-sTU;QoQ2UwJ)],VucCy\"><field name=\"NUM\">-1</field></shadow></value></block></value></block></value><statement name=\"DO0\"><block type=\"variables_change\" id=\"J@Qu@!7.W1+xyYEN3yx:\"><field name=\"VAR\" id=\"fuq+,c{d0)ZA9^E@eV.d\">tagCount</field><value name=\"VALUE\"><shadow type=\"math_number\" id=\"zt-$i5`?rRp*Td[ihT9Y\"><field name=\"NUM\">1</field></shadow></value><next><block type=\"controls_if\" id=\"[mDOF#{;8%;)xS7$BRkI\"><value name=\"IF0\"><shadow type=\"logic_boolean\" id=\"A15|?6QM(s27,o=0P4:,\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\" id=\"mHsnz[@?L9N@gx-hPf:A\"><field name=\"OP\">GTE</field><value name=\"A\"><shadow type=\"math_number\" id=\"ESNv4xlNbQGe.Mb)n0?|\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\" id=\"$bfuI5Ch(frGUXv`m%:S\"><field name=\"VAR\" id=\"fuq+,c{d0)ZA9^E@eV.d\">tagCount</field></block></value><value name=\"B\"><shadow type=\"math_number\" id=\".Lk3;s{2!hvn)oTZB%c,\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\" id=\"C;d-W(0LLj*Y+9D|_5Ic\"><field name=\"VAR\" id=\"V_ub5hIRHvzWOlrQioLy\">TAG_STABILITY_COUNT</field></block></value></block></value><statement name=\"DO0\"><block type=\"controls_if\" id=\"U7g|W7GCIiOryy-770T~\"><mutation elseif=\"2\"></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">穩定檢測到標籤，執行對應動作</comment><value name=\"IF0\"><shadow type=\"logic_boolean\" id=\"%[kU0E6AC/2eBKt(/*rk\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\" id=\"kOQ3P#*$QorsBZHU/eV}\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\" id=\"AVfLbPWJvNR*dLzm*LO#\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\" id=\"*3aSb(6iGUrUVpg0kMTw\"><field name=\"VAR\" id=\"#RR*;zUcUMEVyqIt;W$8\">currentTag</field></block></value><value name=\"B\"><shadow type=\"math_number\" id=\"50{a:?ivO]e#KVIJ`z_U\"><field name=\"NUM\">1</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"variables_set\" id=\"MvK[+]N/l5cK%ydx8)|:\"><field name=\"VAR\" id=\":Wf(EBl2YEK]}?V3O]W@\">state</field><value name=\"VALUE\"><shadow type=\"math_number\" id=\"(l9.mlcSUtWi%Ocwp*M;\"><field name=\"NUM\">1</field></shadow></value><next><block type=\"function_call\" id=\"%}q]@d:V4l:lrw7wSPfz\"><mutation name=\"moveForward\" functionid=\"r#f6.q9Pbdf:!%bP,cT#\"><arg name=\"duration\" id=\"sxr34g2zsy8sq7tqpcfc\" type=\"number\"></arg></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">前進1秒並停止</comment><value name=\"sxr34g2zsy8sq7tqpcfc\"><shadow type=\"math_number\" id=\"@Zd5ma!cLvRP+y[UiF`X\"><field name=\"NUM\">1</field></shadow><block type=\"variables_get\" id=\"2zJa-Rk;-65,l9gB(~D`\"><field name=\"VAR\" id=\"2MKCZy_6io]|*.5C.pqc\">FORWARD_DURATION</field></block></value></block></next></block></statement><value name=\"IF1\"><shadow type=\"logic_boolean\" id=\"kkFhV=%/~G6UmT|w5GIN\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\" id=\"bOU)QB_[x8u{k%sSl1$]\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\" id=\"KM%~!z0KQK-n,L,$-,`b\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\" id=\"8uth*`F3Q|id{~$sey$m\"><field name=\"VAR\" id=\"#RR*;zUcUMEVyqIt;W$8\">currentTag</field></block></value><value name=\"B\"><shadow type=\"math_number\" id=\"1N?C=Rxp^9UZkAvnS}R0\"><field name=\"NUM\">2</field></shadow></value></block></value><statement name=\"DO1\"><block type=\"variables_set\" id=\"@vsGG^bzH9cAf_*SxwO`\"><field name=\"VAR\" id=\":Wf(EBl2YEK]}?V3O]W@\">state</field><value name=\"VALUE\"><shadow type=\"math_number\" id=\"Jkpt,{J|ZTTjHT_W^#GR\"><field name=\"NUM\">2</field></shadow></value><next><block type=\"function_call\" id=\"4X/gwp?KQGboBvww{G^(\"><mutation name=\"turnLeft\" functionid=\"P.3:bc*jNedbOTaE4Y{)\"><arg name=\"duration\" id=\"ainv0e5fhd6d4zaa7sypn\" type=\"number\"></arg></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">原地左轉90度並停止</comment><value name=\"ainv0e5fhd6d4zaa7sypn\"><shadow type=\"math_number\" id=\"i(9!R`#izmAFB85r*wMH\"><field name=\"NUM\">1</field></shadow><block type=\"variables_get\" id=\"GHm9Y2Z8X^4FiJ=_gfxQ\"><field name=\"VAR\" id=\"dBPK$bB{G^EhY}_V]kRw\">TURN_DURATION</field></block></value></block></next></block></statement><value name=\"IF2\"><shadow type=\"logic_boolean\" id=\"TjM)WYu54_!/Q`1;.+j:\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\" id=\"|-ZL:3V]iEBzptYBFO*2\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\" id=\"K;*NoBA3/0`QLFV^}D3)\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\" id=\"clv7ErmC}6O=Uht+g+;^\"><field name=\"VAR\" id=\"#RR*;zUcUMEVyqIt;W$8\">currentTag</field></block></value><value name=\"B\"><shadow type=\"math_number\" id=\"53znhO/Ef.,h8Izi!3|;\"><field name=\"NUM\">3</field></shadow></value></block></value><statement name=\"DO2\"><block type=\"variables_set\" id=\"B=~1=mBn5/;NnL}g:DAo\"><field name=\"VAR\" id=\":Wf(EBl2YEK]}?V3O]W@\">state</field><value name=\"VALUE\"><shadow type=\"math_number\" id=\"*z?-3,QM|$VcS#psT%|?\"><field name=\"NUM\">2</field></shadow></value><next><block type=\"function_call\" id=\"8!YtMVc-r_zb4n8tkKPB\"><mutation name=\"turnRight\" functionid=\"PJ0v=^0YGrk;|uMgUn2$\"><arg name=\"duration\" id=\"mjdr3y5ri3bk9yfmqz4vd\" type=\"number\"></arg></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">原地右轉90度並停止</comment><value name=\"mjdr3y5ri3bk9yfmqz4vd\"><shadow type=\"math_number\" id=\"FsTKRHzF;}hRTZ`dIa{^\"><field name=\"NUM\">1</field></shadow><block type=\"variables_get\" id=\"G.HNA3Y-;8#v1Nmwz1[j\"><field name=\"VAR\" id=\"dBPK$bB{G^EhY}_V]kRw\">TURN_DURATION</field></block></value></block></next></block></statement><next><block type=\"variables_set\" id=\"b0-y/TP$z`b!.1/zZsnL\"><field name=\"VAR\" id=\":Wf(EBl2YEK]}?V3O]W@\">state</field><comment pinned=\"false\" h=\"80\" w=\"160\">返回等待狀態</comment><value name=\"VALUE\"><shadow type=\"math_number\" id=\"j.$%,b{Qpd)`3_jZV5{V\"><field name=\"NUM\">0</field></shadow></value><next><block type=\"variables_set\" id=\"Hp{$aFjg2H4J_fq,l!U=\"><field name=\"VAR\" id=\"fuq+,c{d0)ZA9^E@eV.d\">tagCount</field><comment pinned=\"false\" h=\"80\" w=\"160\">重置計數器</comment><value name=\"VALUE\"><shadow type=\"math_number\" id=\".jm,fRApR90Bkt/z2w{O\"><field name=\"NUM\">0</field></shadow></value><next><block type=\"variables_set\" id=\"i$7=tM5R#Q;5rhcIAjqK\"><field name=\"VAR\" id=\"(9Kz#,XslZTXX[$HTKV_\">lastTag</field><comment pinned=\"false\" h=\"80\" w=\"160\">重置標籤</comment><value name=\"VALUE\"><shadow type=\"math_number\" id=\"_Y2!0/^SV/0[V@^VrS{c\"><field name=\"NUM\">-1</field></shadow></value></block></next></block></next></block></next></block></statement></block></next></block></statement><statement name=\"ELSE\"><block type=\"variables_set\" id=\"A6H3?ho4t#U/*{PsaEs*\"><field name=\"VAR\" id=\"fuq+,c{d0)ZA9^E@eV.d\">tagCount</field><comment pinned=\"false\" h=\"80\" w=\"160\">新標籤，計數從1開始</comment><value name=\"VALUE\"><shadow type=\"math_number\" id=\"5D74wt;r_`a,wiV]hRQO\"><field name=\"NUM\">1</field></shadow></value><next><block type=\"variables_set\" id=\"d[gmxh$OQ^DYv1pWzs/X\"><field name=\"VAR\" id=\"(9Kz#,XslZTXX[$HTKV_\">lastTag</field><data>{\"commentRefs\":[],\"fieldData\":{}}</data><value name=\"VALUE\"><shadow type=\"math_number\" id=\"A]v3a}NpvMS!c_peDU5#\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\" id=\"ml[$aXOS.pNV9epXEfJF\"><field name=\"VAR\" id=\"#RR*;zUcUMEVyqIt;W$8\">currentTag</field></block></value><next><block type=\"function_call\" id=\"-0t*5Uk`@|rMrU.X8Js#\"><mutation name=\"stop\" functionid=\"atOE3QoR|HLd{O,O.X9Y\"></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">未穩定檢測，保持停止</comment></block></next></block></next></block></statement></block></next></block></statement><value name=\"IF1\"><shadow type=\"logic_boolean\" id=\"z{d1Q#b1$)u:|8W9N:0q\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\" id=\"(E3Z+Gesqf-@Xo`K)bN2\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\" id=\"[:eVkv#z-5Ny%WR+*frA\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\" id=\"PO7m!pp%yo?w/kEIeWKb\"><field name=\"VAR\" id=\":Wf(EBl2YEK]}?V3O]W@\">state</field></block></value><value name=\"B\"><shadow type=\"math_number\" id=\"t_)/d2Ug*QVRk[wf?3C~\"><field name=\"NUM\">1</field></shadow></value></block></value><statement name=\"DO1\"><block type=\"variables_set\" id=\"])S*7TB6X?fQO=Rl.0PX\"><field name=\"VAR\" id=\":Wf(EBl2YEK]}?V3O]W@\">state</field><comment pinned=\"false\" h=\"80\" w=\"160\">前進狀態在moveForward中完成，立即返回狀態0</comment><value name=\"VALUE\"><shadow type=\"math_number\" id=\"b1bNYH8[{Is]ka6i5%q1\"><field name=\"NUM\">0</field></shadow></value></block></statement><value name=\"IF2\"><shadow type=\"logic_boolean\" id=\"7imR[3c7bCX~@rc,@_oJ\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\" id=\"EKzF=r={~zbc55bzDE%d\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\" id=\"h4|vrP3TUc3;|:%MX3~c\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\" id=\"@w4qz+4C?ELeCKax)q4(\"><field name=\"VAR\" id=\":Wf(EBl2YEK]}?V3O]W@\">state</field></block></value><value name=\"B\"><shadow type=\"math_number\" id=\"mW5RJ[f,;JrVn^m,7gnE\"><field name=\"NUM\">2</field></shadow></value></block></value><statement name=\"DO2\"><block type=\"variables_set\" id=\"o[J+T_x(+QslSzOz9Pi4\"><field name=\"VAR\" id=\":Wf(EBl2YEK]}?V3O]W@\">state</field><comment pinned=\"false\" h=\"80\" w=\"160\">轉彎狀態在turnLeft或turnRight中完成，立即返回狀態0</comment><value name=\"VALUE\"><shadow type=\"math_number\" id=\"%P_+w68X~cOLs}JCC^ek\"><field name=\"NUM\">0</field></shadow></value></block></statement><next><block type=\"device_pause\" id=\"ELa]Xj4;~$WZ;lQ1wge-\"><comment pinned=\"false\" h=\"80\" w=\"160\">限制刷新頻率為每秒一次</comment><value name=\"pause\"><shadow type=\"timePicker\" id=\"}(Ck(C?[G|9,/ffMYY:D\"><field name=\"ms\">NaN</field></shadow><block type=\"variables_get\" id=\"ICm4V_|-FY%63~}DBQGD\"><field name=\"VAR\" id=\"EZot|CD?1oTjRHJFNH6}\">LOOP_INTERVAL</field></block></value></block></next></block></next></block></statement></block><block type=\"function_definition\" id=\"|Ev*Jn1~)}%)J=dns1p`\" x=\"1643\" y=\"20\"><mutation name=\"move\" functionid=\"v;~rx3.h[$v;fHDzI=bL\"><arg name=\"m1Speed\" id=\"7o21c8nohwujtnygklx1\" type=\"number\"></arg><arg name=\"m2Speed\" id=\"0iptsdc5y5etfhthjw6un\" type=\"number\"></arg><arg name=\"m3Speed\" id=\"e8axkr5k2c9ot35ufp1f\" type=\"number\"></arg><arg name=\"m4Speed\" id=\"xhdn4pjciqn7u859urvs\" type=\"number\"></arg></mutation><field name=\"function_name\">move</field><comment pinned=\"false\" h=\"80\" w=\"160\">標籤連續檢測次數\n通用移動函數：控制四個電機的速度</comment><value name=\"7o21c8nohwujtnygklx1\"><block type=\"argument_reporter_number\" id=\"QM`7-5ma07E@^okWg~lF\"><mutation duplicateondrag=\"true\"></mutation><field name=\"VALUE\">m1Speed</field></block></value><value name=\"0iptsdc5y5etfhthjw6un\"><block type=\"argument_reporter_number\" id=\"s*D)KFF(=1ZI?{WikzCN\"><mutation duplicateondrag=\"true\"></mutation><field name=\"VALUE\">m2Speed</field></block></value><value name=\"e8axkr5k2c9ot35ufp1f\"><block type=\"argument_reporter_number\" id=\"R:4dcU.ID3F~M(9a,iTS\"><mutation duplicateondrag=\"true\"></mutation><field name=\"VALUE\">m3Speed</field></block></value><value name=\"xhdn4pjciqn7u859urvs\"><block type=\"argument_reporter_number\" id=\"c6RcMu_]x#uuZvEFkAO9\"><mutation duplicateondrag=\"true\"></mutation><field name=\"VALUE\">m4Speed</field></block></value><statement name=\"STACK\"><block type=\"SuperBit_MotorRunDual\" id=\"I/U#viKAEL_,=03uLPK*\"><field name=\"motor1\">SuperBit.enMotors.M1</field><field name=\"motor2\">SuperBit.enMotors.M2</field><value name=\"speed1\"><shadow type=\"math_number_minmax\" id=\"6gXx0A?%TuC|OkP06*1v\"><mutation min=\"-255\" max=\"255\" precision=\"0\"></mutation><field name=\"SLIDER\">0</field></shadow><block type=\"argument_reporter_number\" id=\"utCL1L.*[.GJY_4vY#n]\"><field name=\"VALUE\">m1Speed</field></block></value><value name=\"speed2\"><shadow type=\"math_number_minmax\" id=\"HOwOt_%`L6vAdSno[6zL\"><mutation min=\"-255\" max=\"255\" precision=\"0\"></mutation><field name=\"SLIDER\">0</field></shadow><block type=\"argument_reporter_number\" id=\"$];{IiW@edR]y;|)4fK}\"><field name=\"VALUE\">m2Speed</field></block></value><next><block type=\"SuperBit_MotorRunDual\" id=\"H`HE3/Pc{h}itEL[rvz$\"><field name=\"motor1\">SuperBit.enMotors.M3</field><field name=\"motor2\">SuperBit.enMotors.M4</field><value name=\"speed1\"><shadow type=\"math_number_minmax\" id=\"KeGe92s^|L~9QB=H!Eg:\"><mutation min=\"-255\" max=\"255\" precision=\"0\"></mutation><field name=\"SLIDER\">0</field></shadow><block type=\"argument_reporter_number\" id=\"?D0KfB3Grp`{DXTBER~H\"><field name=\"VALUE\">m3Speed</field></block></value><value name=\"speed2\"><shadow type=\"math_number_minmax\" id=\";1iOVPQ69U:Quci!Sip.\"><mutation min=\"-255\" max=\"255\" precision=\"0\"></mutation><field name=\"SLIDER\">0</field></shadow><block type=\"argument_reporter_number\" id=\"`9p/eY!BF%|HmubyXTo(\"><field name=\"VALUE\">m4Speed</field></block></value></block></next></block></statement></block><block type=\"function_definition\" id=\"h=@wlKq8!5Tta]MI))o2\" x=\"2265\" y=\"20\"><mutation name=\"moveForward\" functionid=\"r#f6.q9Pbdf:!%bP,cT#\"><arg name=\"duration\" id=\"sxr34g2zsy8sq7tqpcfc\" type=\"number\"></arg></mutation><field name=\"function_name\">moveForward</field><comment pinned=\"false\" h=\"80\" w=\"160\">前進：所有電機以正向速度運行指定時間</comment><value name=\"sxr34g2zsy8sq7tqpcfc\"><block type=\"argument_reporter_number\" id=\"tu}qzZ=s#NTOU-f5a`*a\"><mutation duplicateondrag=\"true\"></mutation><field name=\"VALUE\">duration</field></block></value><statement name=\"STACK\"><block type=\"function_call\" id=\"RYiq6a4F!.tDQ*kD)4xe\"><mutation name=\"move\" functionid=\"v;~rx3.h[$v;fHDzI=bL\"><arg name=\"m1Speed\" id=\"7o21c8nohwujtnygklx1\" type=\"number\"></arg><arg name=\"m2Speed\" id=\"0iptsdc5y5etfhthjw6un\" type=\"number\"></arg><arg name=\"m3Speed\" id=\"e8axkr5k2c9ot35ufp1f\" type=\"number\"></arg><arg name=\"m4Speed\" id=\"xhdn4pjciqn7u859urvs\" type=\"number\"></arg></mutation><value name=\"7o21c8nohwujtnygklx1\"><shadow type=\"math_number\" id=\"]anSLTsuhm7pVDJ/ueps\"><field name=\"NUM\">1</field></shadow><block type=\"variables_get\" id=\")`LPyw`c-Mno?*};yIq@\"><field name=\"VAR\" id=\":$KPo@/4n:GX3O]dQU*^\">FORWARD_SPEED</field></block></value><value name=\"0iptsdc5y5etfhthjw6un\"><shadow type=\"math_number\" id=\"s(b+gi49{u@W/F;U=33s\"><field name=\"NUM\">1</field></shadow><block type=\"variables_get\" id=\"-3,ku6:MC,[/0A*![r#9\"><field name=\"VAR\" id=\":$KPo@/4n:GX3O]dQU*^\">FORWARD_SPEED</field></block></value><value name=\"e8axkr5k2c9ot35ufp1f\"><shadow type=\"math_number\" id=\"[=6E6..m-IEXxg{^6@d4\"><field name=\"NUM\">1</field></shadow><block type=\"variables_get\" id=\"a$C+UtAvWLE^$Wegi0^9\"><field name=\"VAR\" id=\":$KPo@/4n:GX3O]dQU*^\">FORWARD_SPEED</field></block></value><value name=\"xhdn4pjciqn7u859urvs\"><shadow type=\"math_number\" id=\"7dPH#p/C^D!Xf2AwKyI%\"><field name=\"NUM\">1</field></shadow><block type=\"variables_get\" id=\"C:YQpP*cWvd030dL*J5n\"><field name=\"VAR\" id=\":$KPo@/4n:GX3O]dQU*^\">FORWARD_SPEED</field></block></value><next><block type=\"device_show_leds\" id=\"eq$Hk~:I_U;W41syom!O\"><field name=\"LEDS\">`\n        . . # . . \n        . # # # . \n        # . # . # \n        . . # . . \n        . . # . .\n        `</field><comment pinned=\"false\" h=\"80\" w=\"160\">顯示前進圖標</comment><next><block type=\"device_pause\" id=\"Q-4B|AYEYj+R_oE$0+4I\"><comment pinned=\"false\" h=\"80\" w=\"160\">持續指定時間</comment><value name=\"pause\"><shadow type=\"timePicker\" id=\"z,VYOJm/~TsKzb|6ula]\"><field name=\"ms\">NaN</field></shadow><block type=\"argument_reporter_number\" id=\"tf.#6,Dm-Li`^.@,h_|P\"><field name=\"VALUE\">duration</field></block></value><next><block type=\"function_call\" id=\":h]^Ba$lpYt+5Db:%m^G\"><mutation name=\"stop\" functionid=\"atOE3QoR|HLd{O,O.X9Y\"></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">停止</comment></block></next></block></next></block></next></block></statement></block><block type=\"function_definition\" id=\"%^^0}8d=(J}RA2TKIx][\" x=\"3082\" y=\"20\"><mutation name=\"turnLeft\" functionid=\"P.3:bc*jNedbOTaE4Y{)\"><arg name=\"duration\" id=\"ainv0e5fhd6d4zaa7sypn\" type=\"number\"></arg></mutation><field name=\"function_name\">turnLeft</field><comment pinned=\"false\" h=\"80\" w=\"160\">左轉：M1和M4反轉，M2和M3正轉（原地左轉90度）</comment><value name=\"ainv0e5fhd6d4zaa7sypn\"><block type=\"argument_reporter_number\" id=\"`Eto7=KY$:|ie64Qck=7\"><mutation duplicateondrag=\"true\"></mutation><field name=\"VALUE\">duration</field></block></value><statement name=\"STACK\"><block type=\"function_call\" id=\"kDZ2|1fIkhipcZV,NVCA\"><mutation name=\"move\" functionid=\"v;~rx3.h[$v;fHDzI=bL\"><arg name=\"m1Speed\" id=\"7o21c8nohwujtnygklx1\" type=\"number\"></arg><arg name=\"m2Speed\" id=\"0iptsdc5y5etfhthjw6un\" type=\"number\"></arg><arg name=\"m3Speed\" id=\"e8axkr5k2c9ot35ufp1f\" type=\"number\"></arg><arg name=\"m4Speed\" id=\"xhdn4pjciqn7u859urvs\" type=\"number\"></arg></mutation><value name=\"7o21c8nohwujtnygklx1\"><shadow type=\"math_number\" id=\"}x?`ZSVf5U)fwj^Js?Km\"><field name=\"NUM\">1</field></shadow><block type=\"variables_get\" id=\"efQKqrgo5GRR}8:tR^7z\"><field name=\"VAR\" id=\"YC4i.X#CZ_](-YHLVd.m\">TURN_BACKWARD_SPEED</field></block></value><value name=\"0iptsdc5y5etfhthjw6un\"><shadow type=\"math_number\" id=\"_xQJ0u[.u!k+zsL!N}I8\"><field name=\"NUM\">1</field></shadow><block type=\"variables_get\" id=\"cx0+rZhazU2*zzaK+._d\"><field name=\"VAR\" id=\"hJQ-7zKd7PK[U/7ET|XO\">TURN_FORWARD_SPEED</field></block></value><value name=\"e8axkr5k2c9ot35ufp1f\"><shadow type=\"math_number\" id=\"N6[m(vXQd9xB@Kb@l_Rr\"><field name=\"NUM\">1</field></shadow><block type=\"variables_get\" id=\"RGE-Z.QVDti3Zyxd^6OT\"><field name=\"VAR\" id=\"hJQ-7zKd7PK[U/7ET|XO\">TURN_FORWARD_SPEED</field></block></value><value name=\"xhdn4pjciqn7u859urvs\"><shadow type=\"math_number\" id=\"Q3/ClvS#m7i!{q%oJ$D=\"><field name=\"NUM\">1</field></shadow><block type=\"variables_get\" id=\"%Ukv{G@4+gGOlw)2wy=H\"><field name=\"VAR\" id=\"YC4i.X#CZ_](-YHLVd.m\">TURN_BACKWARD_SPEED</field></block></value><next><block type=\"device_show_leds\" id=\"FU4pLIO*$S$._rrv|$eQ\"><field name=\"LEDS\">`\n        . . # . . \n        . # . . . \n        # # # # # \n        . # . . . \n        . . # . .\n        `</field><comment pinned=\"false\" h=\"80\" w=\"160\">顯示左轉圖標</comment><next><block type=\"device_pause\" id=\")^`S,89}2@-);9:e#!P?\"><comment pinned=\"false\" h=\"80\" w=\"160\">持續指定時間</comment><value name=\"pause\"><shadow type=\"timePicker\" id=\"7Ec:*|ATMOrKxHj@FjDF\"><field name=\"ms\">NaN</field></shadow><block type=\"argument_reporter_number\" id=\"H2BBij~A9c54SclNt~m|\"><field name=\"VALUE\">duration</field></block></value><next><block type=\"function_call\" id=\"f[G50cnNUu}B(tR91l$Z\"><mutation name=\"stop\" functionid=\"atOE3QoR|HLd{O,O.X9Y\"></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">停止</comment></block></next></block></next></block></next></block></statement></block><block type=\"function_definition\" id=\"uJd[s$r/c[#{zOHOdjnN\" x=\"20\" y=\"1721\"><mutation name=\"turnRight\" functionid=\"PJ0v=^0YGrk;|uMgUn2$\"><arg name=\"duration\" id=\"mjdr3y5ri3bk9yfmqz4vd\" type=\"number\"></arg></mutation><field name=\"function_name\">turnRight</field><comment pinned=\"false\" h=\"80\" w=\"160\">右轉：M1和M4正轉，M2和M3反轉（原地右轉90度）</comment><value name=\"mjdr3y5ri3bk9yfmqz4vd\"><block type=\"argument_reporter_number\" id=\"Ak~zhwkh9Y9dtSGKyCb%\"><mutation duplicateondrag=\"true\"></mutation><field name=\"VALUE\">duration</field></block></value><statement name=\"STACK\"><block type=\"function_call\" id=\"cH%hIsozr)_UVLne/2W;\"><mutation name=\"move\" functionid=\"v;~rx3.h[$v;fHDzI=bL\"><arg name=\"m1Speed\" id=\"7o21c8nohwujtnygklx1\" type=\"number\"></arg><arg name=\"m2Speed\" id=\"0iptsdc5y5etfhthjw6un\" type=\"number\"></arg><arg name=\"m3Speed\" id=\"e8axkr5k2c9ot35ufp1f\" type=\"number\"></arg><arg name=\"m4Speed\" id=\"xhdn4pjciqn7u859urvs\" type=\"number\"></arg></mutation><value name=\"7o21c8nohwujtnygklx1\"><shadow type=\"math_number\" id=\"X[nZ^;@oF+C1VhkyBiLa\"><field name=\"NUM\">1</field></shadow><block type=\"variables_get\" id=\"yW7m}.EqXx!ta;8BZTNC\"><field name=\"VAR\" id=\"hJQ-7zKd7PK[U/7ET|XO\">TURN_FORWARD_SPEED</field></block></value><value name=\"0iptsdc5y5etfhthjw6un\"><shadow type=\"math_number\" id=\"+cAuIG;wQwdv:58L]fLk\"><field name=\"NUM\">1</field></shadow><block type=\"variables_get\" id=\"K?,X|?-a.fruUe}~CDh;\"><field name=\"VAR\" id=\"YC4i.X#CZ_](-YHLVd.m\">TURN_BACKWARD_SPEED</field></block></value><value name=\"e8axkr5k2c9ot35ufp1f\"><shadow type=\"math_number\" id=\"[4?0HtlXa]U3RKT{hpO@\"><field name=\"NUM\">1</field></shadow><block type=\"variables_get\" id=\"tIdcPLSKM:NG=J@_!P1M\"><field name=\"VAR\" id=\"YC4i.X#CZ_](-YHLVd.m\">TURN_BACKWARD_SPEED</field></block></value><value name=\"xhdn4pjciqn7u859urvs\"><shadow type=\"math_number\" id=\"HDKuigQ?@vdR:S]F}b1H\"><field name=\"NUM\">1</field></shadow><block type=\"variables_get\" id=\"Y]iG?LU:`c%_XD/O;als\"><field name=\"VAR\" id=\"hJQ-7zKd7PK[U/7ET|XO\">TURN_FORWARD_SPEED</field></block></value><next><block type=\"device_show_leds\" id=\")-VbgUj!+pdAwN$e{/J*\"><field name=\"LEDS\">`\n        . . # . . \n        . . . # . \n        # # # # # \n        . . . # . \n        . . # . .\n        `</field><comment pinned=\"false\" h=\"80\" w=\"160\">顯示右轉圖標</comment><next><block type=\"device_pause\" id=\"j#SM,sB59dg)G-vZza+%\"><comment pinned=\"false\" h=\"80\" w=\"160\">持續指定時間</comment><value name=\"pause\"><shadow type=\"timePicker\" id=\"iY/kUh:Rd;oZ:5us}7|A\"><field name=\"ms\">NaN</field></shadow><block type=\"argument_reporter_number\" id=\"m!ZqwyB#+f?ia?!}{+ZE\"><field name=\"VALUE\">duration</field></block></value><next><block type=\"function_call\" id=\"SNo?8kWC)v,u-0]$Q|]f\"><mutation name=\"stop\" functionid=\"atOE3QoR|HLd{O,O.X9Y\"></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">停止</comment></block></next></block></next></block></next></block></statement></block><block type=\"function_definition\" id=\"Q*4y|?X{pV~cb3QLnYA(\" x=\"1031\" y=\"1721\"><mutation name=\"stop\" functionid=\"atOE3QoR|HLd{O,O.X9Y\"></mutation><field name=\"function_name\">stop</field><comment pinned=\"false\" h=\"80\" w=\"160\">停止：所有電機速度設為0</comment><statement name=\"STACK\"><block type=\"function_call\" id=\"`usE+PFx}91VbXK^ubI3\"><mutation name=\"move\" functionid=\"v;~rx3.h[$v;fHDzI=bL\"><arg name=\"m1Speed\" id=\"7o21c8nohwujtnygklx1\" type=\"number\"></arg><arg name=\"m2Speed\" id=\"0iptsdc5y5etfhthjw6un\" type=\"number\"></arg><arg name=\"m3Speed\" id=\"e8axkr5k2c9ot35ufp1f\" type=\"number\"></arg><arg name=\"m4Speed\" id=\"xhdn4pjciqn7u859urvs\" type=\"number\"></arg></mutation><value name=\"7o21c8nohwujtnygklx1\"><shadow type=\"math_number\" id=\"I8kojCcti?#R.aRz[+ji\"><field name=\"NUM\">1</field></shadow><block type=\"variables_get\" id=\"TTXAocAKWn^{uts+=XF:\"><field name=\"VAR\" id=\"hiZ{?/~,#3KK?A8w5Yh.\">STOP_SPEED</field></block></value><value name=\"0iptsdc5y5etfhthjw6un\"><shadow type=\"math_number\" id=\"(05F8Gnjd!Tz3n0*dOSA\"><field name=\"NUM\">1</field></shadow><block type=\"variables_get\" id=\"myukOX?jMcRtgC20D`#{\"><field name=\"VAR\" id=\"hiZ{?/~,#3KK?A8w5Yh.\">STOP_SPEED</field></block></value><value name=\"e8axkr5k2c9ot35ufp1f\"><shadow type=\"math_number\" id=\"*FC{S9o6m~Tw@jLnsU|h\"><field name=\"NUM\">1</field></shadow><block type=\"variables_get\" id=\"-kOp{9yvQwggG?ebZ~8g\"><field name=\"VAR\" id=\"hiZ{?/~,#3KK?A8w5Yh.\">STOP_SPEED</field></block></value><value name=\"xhdn4pjciqn7u859urvs\"><shadow type=\"math_number\" id=\"_;JR*s?1.EG:W.+;dUMg\"><field name=\"NUM\">1</field></shadow><block type=\"variables_get\" id=\"?56v2vTt];^mxd9+ow;5\"><field name=\"VAR\" id=\"hiZ{?/~,#3KK?A8w5Yh.\">STOP_SPEED</field></block></value><next><block type=\"device_show_leds\" id=\"w+w%Vv{7?d[KjQ;tQdXz\"><field name=\"LEDS\">`\n        . . . . . \n        . . . . . \n        . # # # . \n        . . . . . \n        . . . . .\n        `</field><comment pinned=\"false\" h=\"80\" w=\"160\">顯示停止圖標</comment><next><block type=\"device_clear_display\" id=\"GA|H}2]SoHyV`$]*ZU*B\"><data>{\"commentRefs\":[],\"fieldData\":{}}</data></block></next></block></next></block></statement></block><block type=\"function_definition\" id=\"-@9DL-IEsVbcUetx,OId\" x=\"1743\" y=\"1721\"><mutation name=\"showError\" functionid=\"]dA*|K/Le;g(TYE5y^OP\"></mutation><field name=\"function_name\">showError</field><comment pinned=\"false\" h=\"80\" w=\"160\">顯示錯誤並停止</comment><statement name=\"STACK\"><block type=\"device_show_leds\" id=\"%#xM|%aG?muv801ZgJM|\"><field name=\"LEDS\">`\n        # . . . # \n        . # . # . \n        . . # . . \n        . # . # . \n        # . . . #\n        `</field><comment pinned=\"false\" h=\"80\" w=\"160\">顯示錯誤圖標（叉形）</comment><next><block type=\"device_clear_display\" id=\"31c$1PUOHptEdJb|P]`)\"><data>{\"commentRefs\":[],\"fieldData\":{}}</data><next><block type=\"function_call\" id=\"hnEOGj1;tDlxtIvkQ2,W\"><mutation name=\"stop\" functionid=\"atOE3QoR|HLd{O,O.X9Y"],[1,"$WuyN0)M2d:-lg2FnOnx\">FORWARD_SPEED</variable><variable id=\"#Fqf|`mH5P**wE.WN[?q\">STOP_SPEED</variable><variable id=\"{nWc*,|2(Ee@2L=8{Vsj\">state</variable><variable id=\"_3MF4UULVNf::/JWr~A?\">currentTag</variable><variable id=\"(s,uWcs]|Jw3`J8:B)8D\">lastTag</variable><variable id=\"9_0`Hm-:aNWU/S3o10/v\">tagCount</variable><variable id=\"@{TBf!a#!`Je_-^8HIr!\">TAG_STABILITY_COUNT</variable><variable id=\"fTcMiL|L|.l26fkpgqk6\">FORWARD_DURATION</variable><variable id=\";t6$uV^I`1{bgr-7}3%%\">TURN_DURATION</variable><variable id=\"?$+!G38m!|WZx/w`H,SJ\">LOOP_INTERVAL</variable></variables><comment x=\"0\" y=\"2346\" w=\"192.01040649414062\" h=\"120\">\n狀態機：0=等待，1=前進，2=轉彎\n</comment><block type=\"pxt-on-start\" x=\"0\" y=\"0\"><statement name=\"HANDLER\"><block type=\"variables_set\"><field name=\"VAR\" id=\"$WuyN0)M2d:-lg2FnOnx\">FORWARD_SPEED</field><comment pinned=\"false\" h=\"80\" w=\"160\">電機速度常數\n前進速度</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">150</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\";t6$uV^I`1{bgr-7}3%%\">TURN_DURATION</field><comment pinned=\"false\" h=\"80\" w=\"160\">停止速度\n轉彎持續時間</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">1000</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"fTcMiL|L|.l26fkpgqk6\">FORWARD_DURATION</field><comment pinned=\"false\" h=\"80\" w=\"160\">前進持續時間（毫秒）</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">1000</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"?$+!G38m!|WZx/w`H,SJ\">LOOP_INTERVAL</field><comment pinned=\"false\" h=\"80\" w=\"160\">主循環刷新間隔（毫秒）</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">1000</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"@{TBf!a#!`Je_-^8HIr!\">TAG_STABILITY_COUNT</field><comment pinned=\"false\" h=\"80\" w=\"160\">標籤連續檢測次數</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">2</field></shadow></value><next><block type=\"basic_show_icon\"><field name=\"i\">IconNames.Yes</field><comment pinned=\"false\" h=\"80\" w=\"160\">初始化\n顯示\"對勾\"表示初始化成功</comment><next><block type=\"huskylens_initI2c\"><comment pinned=\"false\" h=\"80\" w=\"160\">初始化Huskylens的I2C通信</comment><next><block type=\"huskylens_writeName\"><comment pinned=\"false\" h=\"80\" w=\"160\">設置標籤名稱</comment><value name=\"id\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value><value name=\"name\"><shadow type=\"text\"><field name=\"TEXT\">Forward</field></shadow></value><next><block type=\"huskylens_writeName\"><comment pinned=\"false\" h=\"80\" w=\"160\">原地左轉90度</comment><value name=\"id\"><shadow type=\"math_number\"><field name=\"NUM\">2</field></shadow></value><value name=\"name\"><shadow type=\"text\"><field name=\"TEXT\">Turn Left</field></shadow></value><next><block type=\"huskylens_writeName\"><comment pinned=\"false\" h=\"80\" w=\"160\">原地右轉90度</comment><value name=\"id\"><shadow type=\"math_number\"><field name=\"NUM\">3</field></shadow></value><value name=\"name\"><shadow type=\"text\"><field name=\"TEXT\">Turn Right</field></shadow></value><next><block type=\"controls_if\"><data>{\"commentRefs\":[],\"fieldData\":{}}</data><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_negate\"><value name=\"BOOL\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"typescript_expression\"><field name=\"EXPRESSION\">huskylens.initMode(protocolAlgorithm.OBJECTCLASSIFICATION)</field></block></value></block></value><statement name=\"DO0\"><block type=\"function_call\"><mutation name=\"showError\" functionid=\"+Eh,d!mi2$;M;O0F)BN?\"></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">初始化失敗，顯示錯誤並停止</comment><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"basic.forever(() =&gt; { });\" numlines=\"1\"></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">進入空循環，停止程序</comment></block></next></block></statement><next><block type=\"variables_set\"><field name=\"VAR\" id=\"(s,uWcs]|Jw3`J8:B)8D\">lastTag</field><comment pinned=\"false\" h=\"80\" w=\"160\">連續檢測計數器\n上次檢測的標籤ID</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">-1</field></shadow></value></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type=\"device_button_event\" x=\"739\" y=\"0\"><field name=\"NAME\">Button.A</field><comment pinned=\"false\" h=\"80\" w=\"160\">校準按鈕（用於調整轉彎時間）</comment><statement name=\"HANDLER\"><block type=\"variables_change\"><field name=\"VAR\" id=\";t6$uV^I`1{bgr-7}3%%\">TURN_DURATION</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">50</field></shadow></value><next><block type=\"device_show_number\"><value name=\"number\"><block type=\"variables_get\"><field name=\"VAR\" id=\";t6$uV^I`1{bgr-7}3%%\">TURN_DURATION</field></block></value><next><block type=\"device_clear_display\"></block></next></block></next></block></statement></block><block type=\"device_button_event\" x=\"1121\" y=\"0\"><field name=\"NAME\">Button.B</field><statement name=\"HANDLER\"><block type=\"variables_set\"><field name=\"VAR\" id=\";t6$uV^I`1{bgr-7}3%%\">TURN_DURATION</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_op2\"><field name=\"op\">max</field><value name=\"x\"><shadow type=\"math_number\"><field name=\"NUM\">100</field></shadow></value><value name=\"y\"><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\";t6$uV^I`1{bgr-7}3%%\">TURN_DURATION</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">50</field></shadow></value></block></value></block></value><next><block type=\"device_show_number\"><value name=\"number\"><block type=\"variables_get\"><field name=\"VAR\" id=\";t6$uV^I`1{bgr-7}3%%\">TURN_DURATION</field></block></value><next><block type=\"device_clear_display\"></block></next></block></next></block></statement></block><block type=\"device_button_event\" x=\"1929\" y=\"0\"><field name=\"NAME\">Button.AB</field><statement name=\"HANDLER\"><block type=\"function_call\"><mutation name=\"turnLeft\" functionid=\"?|-~$Q0TUT+9;hSk%;1g\"><arg name=\"duration\" id=\"pr293nj37f0enesamhrw3o\" type=\"number\"></arg></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">測試左轉</comment><value name=\"pr293nj37f0enesamhrw3o\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\";t6$uV^I`1{bgr-7}3%%\">TURN_DURATION</field></block></value><next><block type=\"device_pause\"><data>{\"commentRefs\":[],\"fieldData\":{}}</data><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">1000</field></shadow></value><next><block type=\"function_call\"><mutation name=\"turnRight\" functionid=\"}|CY6gfa8V@Nfeb0*OGH\"><arg name=\"duration\" id=\"8a9ci55145fvbqqb274zll\" type=\"number\"></arg></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">測試右轉</comment><value name=\"8a9ci55145fvbqqb274zll\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\";t6$uV^I`1{bgr-7}3%%\">TURN_DURATION</field></block></value></block></next></block></next></block></statement></block><block type=\"device_forever\" x=\"2340\" y=\"0\"><comment pinned=\"false\" h=\"80\" w=\"160\">上次檢測的標籤ID\n主循環</comment><statement name=\"HANDLER\"><block type=\"huskylens_request\"><comment pinned=\"false\" h=\"80\" w=\"160\">獲取Huskylens數據</comment><next><block type=\"controls_if\"><mutation elseif=\"2\"></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">狀態機邏輯</comment><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"{nWc*,|2(Ee@2L=8{Vsj\">state</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"let currentTag = huskylens.isAppear(1, HUSKYLENSResultType_t.HUSKYLENSResultBlock) ? 1 :\" line1=\"            huskylens.isAppear(2, HUSKYLENSResultType_t.HUSKYLENSResultBlock) ? 2 :\" line2=\"                huskylens.isAppear(3, HUSKYLENSResultType_t.HUSKYLENSResultBlock) ? 3 : -1;\" numlines=\"3\" declaredvars=\"currentTag\"></mutation><next><block type=\"controls_if\"><mutation else=\"1\"></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">檢查標籤穩定性</comment><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_operation\"><field name=\"OP\">AND</field><value name=\"A\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"_3MF4UULVNf::/JWr~A?\">currentTag</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"(s,uWcs]|Jw3`J8:B)8D\">lastTag</field></block></value></block></value><value name=\"B\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">NEQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"_3MF4UULVNf::/JWr~A?\">currentTag</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">-1</field></shadow></value></block></value></block></value><statement name=\"DO0\"><block type=\"variables_change\"><field name=\"VAR\" id=\"9_0`Hm-:aNWU/S3o10/v\">tagCount</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value><next><block type=\"controls_if\"><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">GTE</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"9_0`Hm-:aNWU/S3o10/v\">tagCount</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"@{TBf!a#!`Je_-^8HIr!\">TAG_STABILITY_COUNT</field></block></value></block></value><statement name=\"DO0\"><block type=\"controls_if\"><mutation elseif=\"2\"></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">穩定檢測到標籤，執行對應動作</comment><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"_3MF4UULVNf::/JWr~A?\">currentTag</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"variables_set\"><field name=\"VAR\" id=\"{nWc*,|2(Ee@2L=8{Vsj\">state</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value><next><block type=\"function_call\"><mutation name=\"moveForward\" functionid=\"TrL?^A`EcTR*v[n9@^`H\"><arg name=\"duration\" id=\"m26gchjybkr37kmptjmuj\" type=\"number\"></arg></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">前進1秒並停止</comment><value name=\"m26gchjybkr37kmptjmuj\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"fTcMiL|L|.l26fkpgqk6\">FORWARD_DURATION</field></block></value></block></next></block></statement><value name=\"IF1\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"_3MF4UULVNf::/JWr~A?\">currentTag</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">2</field></shadow></value></block></value><statement name=\"DO1\"><block type=\"variables_set\"><field name=\"VAR\" id=\"{nWc*,|2(Ee@2L=8{Vsj\">state</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">2</field></shadow></value><next><block type=\"function_call\"><mutation name=\"turnLeft\" functionid=\"?|-~$Q0TUT+9;hSk%;1g\"><arg name=\"duration\" id=\"pr293nj37f0enesamhrw3o\" type=\"number\"></arg></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">原地左轉90度並停止</comment><value name=\"pr293nj37f0enesamhrw3o\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\";t6$uV^I`1{bgr-7}3%%\">TURN_DURATION</field></block></value></block></next></block></statement><value name=\"IF2\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"_3MF4UULVNf::/JWr~A?\">currentTag</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">3</field></shadow></value></block></value><statement name=\"DO2\"><block type=\"variables_set\"><field name=\"VAR\" id=\"{nWc*,|2(Ee@2L=8{Vsj\">state</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">2</field></shadow></value><next><block type=\"function_call\"><mutation name=\"turnRight\" functionid=\"}|CY6gfa8V@Nfeb0*OGH\"><arg name=\"duration\" id=\"8a9ci55145fvbqqb274zll\" type=\"number\"></arg></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">原地右轉90度並停止</comment><value name=\"8a9ci55145fvbqqb274zll\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\";t6$uV^I`1{bgr-7}3%%\">TURN_DURATION</field></block></value></block></next></block></statement><next><block type=\"variables_set\"><field name=\"VAR\" id=\"{nWc*,|2(Ee@2L=8{Vsj\">state</field><comment pinned=\"false\" h=\"80\" w=\"160\">返回等待狀態</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"9_0`Hm-:aNWU/S3o10/v\">tagCount</field><comment pinned=\"false\" h=\"80\" w=\"160\">重置計數器</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"(s,uWcs]|Jw3`J8:B)8D\">lastTag</field><comment pinned=\"false\" h=\"80\" w=\"160\">重置標籤</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">-1</field></shadow></value></block></next></block></next></block></next></block></statement></block></next></block></statement><statement name=\"ELSE\"><block type=\"variables_set\"><field name=\"VAR\" id=\"9_0`Hm-:aNWU/S3o10/v\">tagCount</field><comment pinned=\"false\" h=\"80\" w=\"160\">新標籤，計數從1開始</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"(s,uWcs]|Jw3`J8:B)8D\">lastTag</field><data>{\"commentRefs\":[],\"fieldData\":{}}</data><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"_3MF4UULVNf::/JWr~A?\">currentTag</field></block></value><next><block type=\"function_call\"><mutation name=\"stop\" functionid=\"?4+eAizuu$sFlr]hLKqA\"></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">未穩定檢測，保持停止</comment></block></next></block></next></block></statement></block></next></block></statement><value name=\"IF1\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"{nWc*,|2(Ee@2L=8{Vsj\">state</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><statement name=\"DO1\"><block type=\"variables_set\"><field name=\"VAR\" id=\"{nWc*,|2(Ee@2L=8{Vsj\">state</field><comment pinned=\"false\" h=\"80\" w=\"160\">前進狀態在moveForward中完成，立即返回狀態0</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></statement><value name=\"IF2\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"{nWc*,|2(Ee@2L=8{Vsj\">state</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">2</field></shadow></value></block></value><statement name=\"DO2\"><block type=\"variables_set\"><field name=\"VAR\" id=\"{nWc*,|2(Ee@2L=8{Vsj\">state</field><comment pinned=\"false\" h=\"80\" w=\"160\">轉彎狀態在turnLeft或turnRight中完成，立即返回狀態0</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></statement><next><block type=\"device_pause\"><comment pinned=\"false\" h=\"80\" w=\"160\">限制刷新頻率為每秒一次</comment><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">NaN</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"?$+!G38m!|WZx/w`H,SJ\">LOOP_INTERVAL</field></block></value></block></next></block></next></block></statement></block><block type=\"function_definition\" x=\"0\" y=\"1731\"><mutation name=\"move\" functionid=\"@cM}KgB3t*S;R92v2B_T\"><arg name=\"m1Speed\" id=\"bpeuarhfvp25ufrnennj\" type=\"number\"></arg><arg name=\"m2Speed\" id=\"7uw55jww6jkktezwwdx0s\" type=\"number\"></arg><arg name=\"m3Speed\" id=\"stfaf64isb17kb1d8esu\" type=\"number\"></arg><arg name=\"m4Speed\" id=\"y30fci46a9wdhct1fqza\" type=\"number\"></arg></mutation><field name=\"function_name\">move</field><comment pinned=\"false\" h=\"80\" w=\"160\">標籤連續檢測次數\n通用移動函數：控制四個電機的速度</comment><value name=\"bpeuarhfvp25ufrnennj\"><block type=\"argument_reporter_number\"><mutation duplicateondrag=\"true\"></mutation><field name=\"VALUE\">m1Speed</field></block></value><value name=\"7uw55jww6jkktezwwdx0s\"><block type=\"argument_reporter_number\"><mutation duplicateondrag=\"true\"></mutation><field name=\"VALUE\">m2Speed</field></block></value><value name=\"stfaf64isb17kb1d8esu\"><block type=\"argument_reporter_number\"><mutation duplicateondrag=\"true\"></mutation><field name=\"VALUE\">m3Speed</field></block></value><value name=\"y30fci46a9wdhct1fqza\"><block type=\"argument_reporter_number\"><mutation duplicateondrag=\"true\"></mutation><field name=\"VALUE\">m4Speed</field></block></value><statement name=\"STACK\"><block type=\"SuperBit_MotorRunDual\"><field name=\"motor1\">SuperBit.enMotors.M1</field><field name=\"motor2\">SuperBit.enMotors.M2</field><value name=\"speed1\"><shadow type=\"math_number_minmax\"><mutation min=\"-255\" max=\"255\" precision=\"0\"></mutation><field name=\"SLIDER\">0</field></shadow><block type=\"argument_reporter_number\"><field name=\"VALUE\">m1Speed</field></block></value><value name=\"speed2\"><shadow type=\"math_number_minmax\"><mutation min=\"-255\" max=\"255\" precision=\"0\"></mutation><field name=\"SLIDER\">0</field></shadow><block type=\"argument_reporter_number\"><field name=\"VALUE\">m2Speed</field></block></value><next><block type=\"SuperBit_MotorRunDual\"><field name=\"motor1\">SuperBit.enMotors.M3</field><field name=\"motor2\">SuperBit.enMotors.M4</field><value name=\"speed1\"><shadow type=\"math_number_minmax\"><mutation min=\"-255\" max=\"255\" precision=\"0\"></mutation><field name=\"SLIDER\">0</field></shadow><block type=\"argument_reporter_number\"><field name=\"VALUE\">m3Speed</field></block></value><value name=\"speed2\"><shadow type=\"math_number_minmax\"><mutation min=\"-255\" max=\"255\" precision=\"0\"></mutation><field name=\"SLIDER\">0</field></shadow><block type=\"argument_reporter_number\"><field name=\"VALUE\">m4Speed</field></block></value></block></next></block></statement></block><block type=\"function_definition\" x=\"654\" y=\"1731\"><mutation name=\"moveForward\" functionid=\"TrL?^A`EcTR*v[n9@^`H\"><arg name=\"duration\" id=\"m26gchjybkr37kmptjmuj\" type=\"number\"></arg></mutation><field name=\"function_name\">moveForward</field><comment pinned=\"false\" h=\"80\" w=\"160\">前進：所有電機以正向速度運行指定時間</comment><value name=\"m26gchjybkr37kmptjmuj\"><block type=\"argument_reporter_number\"><mutation duplicateondrag=\"true\"></mutation><field name=\"VALUE\">duration</field></block></value><statement name=\"STACK\"><block type=\"function_call\"><mutation name=\"move\" functionid=\"@cM}KgB3t*S;R92v2B_T\"><arg name=\"m1Speed\" id=\"bpeuarhfvp25ufrnennj\" type=\"number\"></arg><arg name=\"m2Speed\" id=\"7uw55jww6jkktezwwdx0s\" type=\"number\"></arg><arg name=\"m3Speed\" id=\"stfaf64isb17kb1d8esu\" type=\"number\"></arg><arg name=\"m4Speed\" id=\"y30fci46a9wdhct1fqza\" type=\"number\"></arg></mutation><value name=\"bpeuarhfvp25ufrnennj\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"$WuyN0)M2d:-lg2FnOnx\">FORWARD_SPEED</field></block></value><value name=\"7uw55jww6jkktezwwdx0s\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"$WuyN0)M2d:-lg2FnOnx\">FORWARD_SPEED</field></block></value><value name=\"stfaf64isb17kb1d8esu\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"$WuyN0)M2d:-lg2FnOnx\">FORWARD_SPEED</field></block></value><value name=\"y30fci46a9wdhct1fqza\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"$WuyN0)M2d:-lg2FnOnx\">FORWARD_SPEED</field></block></value><next><block type=\"device_show_leds\"><field name=\"LEDS\">`\n        . . # . . \n        . # # # . \n        # . # . # \n        . . # . . \n        . . # . .\n        `</field><comment pinned=\"false\" h=\"80\" w=\"160\">顯示前進圖標</comment><next><block type=\"device_pause\"><comment pinned=\"false\" h=\"80\" w=\"160\">持續指定時間</comment><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">NaN</field></shadow><block type=\"argument_reporter_number\"><field name=\"VALUE\">duration</field></block></value><next><block type=\"function_call\"><mutation name=\"stop\" functionid=\"?4+eAizuu$sFlr]hLKqA\"></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">停止</comment></block></next></block></next></block></next></block></statement></block><block type=\"function_definition\" x=\"1523\" y=\"1731\"><mutation name=\"turnLeft\" functionid=\"?|-~$Q0TUT+9;hSk%;1g\"><arg name=\"duration\" id=\"pr293nj37f0enesamhrw3o\" type=\"number\"></arg></mutation><field name=\"function_name\">turnLeft</field><comment pinned=\"false\" h=\"80\" w=\"160\">左轉</comment><value name=\"pr293nj37f0enesamhrw3o\"><block type=\"argument_reporter_number\"><mutation duplicateondrag=\"true\"></mutation><field name=\"VALUE\">duration</field></block></value><statement name=\"STACK\"><block type=\"function_call\"><mutation name=\"move\" functionid=\"@cM}KgB3t*S;R92v2B_T\"><arg name=\"m1Speed\" id=\"bpeuarhfvp25ufrnennj\" type=\"number\"></arg><arg name=\"m2Speed\" id=\"7uw55jww6jkktezwwdx0s\" type=\"number\"></arg><arg name=\"m3Speed\" id=\"stfaf64isb17kb1d8esu\" type=\"number\"></arg><arg name=\"m4Speed\" id=\"y30fci46a9wdhct1fqza\" type=\"number\"></arg></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">手動插入速度值</comment><value name=\"bpeuarhfvp25ufrnennj\"><shadow type=\"math_number\"><field name=\"NUM\">150</field></shadow></value><value name=\"7uw55jww6jkktezwwdx0s\"><shadow type=\"math_number\"><field name=\"NUM\">-200</field></shadow></value><value name=\"stfaf64isb17kb1d8esu\"><shadow type=\"math_number\"><field name=\"NUM\">150</field></shadow></value><value name=\"y30fci46a9wdhct1fqza\"><shadow type=\"math_number\"><field name=\"NUM\">150</field></shadow></value><next><block type=\"device_show_leds\"><field name=\"LEDS\">`\n        . . # . . \n        . # . . . \n        # # # # # \n        . # . . . \n        . . # . .\n        `</field><comment pinned=\"false\" h=\"80\" w=\"160\">顯示左轉圖標</comment><next><block type=\"device_pause\"><comment pinned=\"false\" h=\"80\" w=\"160\">持續指定時間</comment><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">NaN</field></shadow><block type=\"argument_reporter_number\"><field name=\"VALUE\">duration</field></block></value><next><block type=\"function_call\"><mutation name=\"stop\" functionid=\"?4+eAizuu$sFlr]hLKqA\"></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">停止</comment></block></next></block></next></block></next></block></statement></block><block type=\"function_definition\" x=\"1963\" y=\"1731\"><mutation name=\"turnRight\" functionid=\"}|CY6gfa8V@Nfeb0*OGH\"><arg name=\"duration\" id=\"8a9ci55145fvbqqb274zll\" type=\"number\"></arg></mutation><field name=\"function_name\">turnRight</field><comment pinned=\"false\" h=\"80\" w=\"160\">右轉</comment><value name=\"8a9ci55145fvbqqb274zll\"><block type=\"argument_reporter_number\"><mutation duplicateondrag=\"true\"></mutation><field name=\"VALUE\">duration</field></block></value><statement name=\"STACK\"><block type=\"function_call\"><mutation name=\"move\" functionid=\"@cM}KgB3t*S;R92v2B_T\"><arg name=\"m1Speed\" id=\"bpeuarhfvp25ufrnennj\" type=\"number\"></arg><arg name=\"m2Speed\" id=\"7uw55jww6jkktezwwdx0s\" type=\"number\"></arg><arg name=\"m3Speed\" id=\"stfaf64isb17kb1d8esu\" type=\"number\"></arg><arg name=\"m4Speed\" id=\"y30fci46a9wdhct1fqza\" type=\"number\"></arg></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">手動插入速度值</comment><value name=\"bpeuarhfvp25ufrnennj\"><shadow type=\"math_number\"><field name=\"NUM\">150</field></shadow></value><value name=\"7uw55jww6jkktezwwdx0s\"><shadow type=\"math_number\"><field name=\"NUM\">150</field></shadow></value><value name=\"stfaf64isb17kb1d8esu\"><shadow type=\"math_number\"><field name=\"NUM\">-200</field></shadow></value><value name=\"y30fci46a9wdhct1fqza\"><shadow type=\"math_number\"><field name=\"NUM\">150</field></shadow></value><next><block type=\"device_show_leds\"><field name=\"LEDS\">`\n        . . # . . \n        . . . # . \n        # # # # # \n        . . . # . \n        . . # . .\n        `</field><comment pinned=\"false\" h=\"80\" w=\"160\">顯示右轉圖標</comment><next><block type=\"device_pause\"><comment pinned=\"false\" h=\"80\" w=\"160\">持續指定時間</comment><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">NaN</field></shadow><block type=\"argument_reporter_number\"><field name=\"VALUE\">duration</field></block></value><next><block type=\"function_call\"><mutation name=\"stop\" functionid=\"?4+eAizuu$sFlr]hLKqA\"></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">停止</comment></block></next></block></next></block></next></block></statement></block><block type=\"function_definition\" x=\"2402\" y=\"1731\"><mutation name=\"stop\" functionid=\"?4+eAizuu$sFlr]hLKqA\"></mutation><field name=\"function_name\">stop</field><comment pinned=\"false\" h=\"80\" w=\"160\">停止：所有電機速度設為0</comment><statement name=\"STACK\"><block type=\"function_call\"><mutation name=\"move\" functionid=\"@cM}KgB3t*S;R92v2B_T\"><arg name=\"m1Speed\" id=\"bpeuarhfvp25ufrnennj\" type=\"number\"></arg><arg name=\"m2Speed\" id=\"7uw55jww6jkktezwwdx0s\" type=\"number\"></arg><arg name=\"m3Speed\" id=\"stfaf64isb17kb1d8esu\" type=\"number\"></arg><arg name=\"m4Speed\" id=\"y30fci46a9wdhct1fqza\" type=\"number\"></arg></mutation><value name=\"bpeuarhfvp25ufrnennj\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"#Fqf|`mH5P**wE.WN[?q\">STOP_SPEED</field></block></value><value name=\"7uw55jww6jkktezwwdx0s\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"#Fqf|`mH5P**wE.WN[?q\">STOP_SPEED</field></block></value><value name=\"stfaf64isb17kb1d8esu\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"#Fqf|`mH5P**wE.WN[?q\">STOP_SPEED</field></block></value><value name=\"y30fci46a9wdhct1fqza\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"#Fqf|`mH5P**wE.WN[?q\">STOP_SPEED</field></block></value><next><block type=\"device_show_leds\"><field name=\"LEDS\">`\n        . . . . . \n        . . . . . \n        . # # # . \n        . . . . . \n        . . . . .\n        `</field><comment pinned=\"false\" h=\"80\" w=\"160\">顯示停止圖標</comment><next><block type=\"device_clear_display\"><data>{\"commentRefs\":[],\"fieldData\":{}}</data></block></next></block></next></block></statement></block><block type=\"function_definition\" x=\"3156\" y=\"1731\"><mutation name=\"showError\" functionid=\"+Eh,d!mi2$;M;O0F)BN?\"></mutation><field name=\"function_name\">showError</field><comment pinned=\"false\" h=\"80\" w=\"160\">顯示錯誤並停止</comment><statement name=\"STACK\"><block type=\"device_show_leds\"><field name=\"LEDS\">`\n        # . . . # \n        . # . # . \n        . . # . . \n        . # . # . \n        # . . . #\n        `</field><comment pinned=\"false\" h=\"80\" w=\"160\">顯示錯誤圖標（叉形）</comment><next><block type=\"device_clear_display\"><data>{\"commentRefs\":[],\"fieldData\":{}}</data><next><block type=\"function_call\"><mutation name=\"stop\" functionid=\"?4+eAizuu$sFlr]hLKqA"],[0,"\"></"]],"start1":76,"start2":76,"length1":32714,"length2":28806}]},{"type":"edited","filename":"main.ts","patch":[{"diffs":[[0,"/"],[-1,"**\n * 狀態機：0=等待，1=前進，2=轉彎\n */"],[1,"/ 電機速度常數\nconst FORWARD_SPEED = 105; // 前進速度\nconst TURN_FORWARD_SPEED = 150; // 轉彎正向速度（增強動力）\nconst TURN_BACKWARD_SPEED = -150; // 轉彎反向速度（增強動力）\nconst STOP_SPEED = 0; // 停止速度\nconst TURN_DURATION = 600; // 轉彎持續時間（毫秒，校準為90度原地旋轉）\nconst FORWARD_DURATION = 1000; // 前進持續時間（毫秒）\nconst LOOP_INTERVAL = 1000; // 主循環刷新間隔（毫秒）\nconst TAG_STABILITY_COUNT = 2; // 標籤連續檢測次數\n\n// 通用移動函數：控制四個電機的速度\nfunction move(m1Speed: number, m2Speed: number, m3Speed: number, m4Speed: number): void {\n    SuperBit.MotorRunDual(SuperBit.enMotors.M1, m1Speed, SuperBit.enMotors.M2, m2Speed);\n    SuperBit.MotorRunDual(SuperBit.enMotors.M3, m3Speed, SuperBit.enMotors.M4, m4Speed);\n}\n"],[0,"\n// "]],"start1":0,"start2":0,"length1":33,"length2":651},{"diffs":[[0,"eForward"],[-1," "],[0,"(duratio"]],"start1":682,"start2":682,"length1":17,"length2":16},{"diffs":[[0,"uration: number)"],[1,": void"],[0," {\n    move(FORW"]],"start1":692,"start2":692,"length1":32,"length2":38},{"diffs":[[0,"EED)"],[-1,"\n    // 顯示前進圖標"],[1,";"],[0,"\n   "]],"start1":781,"start2":781,"length1":22,"length2":9},{"diffs":[[0,".\n        `)"],[-1,"\n    // 持續指定時間"],[1,"; // 顯示前進圖標"],[0,"\n    basic.p"]],"start1":896,"start2":896,"length1":38,"length2":35},{"diffs":[[0,"se(duration)"],[-1,"\n    // 停止"],[1,"; // 持續指定時間"],[0,"\n    stop()\n"]],"start1":933,"start2":933,"length1":34,"length2":35},{"diffs":[[0,"  stop()"],[1,"; // 停止"],[0,"\n}\n"],[1,"\n"],[0,"// 左轉：M1"]],"start1":959,"start2":959,"length1":19,"length2":27},{"diffs":[[0,"turnLeft"],[-1," "],[0,"(duratio"]],"start1":1018,"start2":1018,"length1":17,"length2":16},{"diffs":[[0,"uration: number)"],[1,": void"],[0," {\n    move(TURN"]],"start1":1028,"start2":1028,"length1":32,"length2":38},{"diffs":[[0,"EED)"],[-1,"\n    // 顯示左轉圖標"],[1,";"],[0,"\n   "]],"start1":1139,"start2":1139,"length1":22,"length2":9},{"diffs":[[0,".\n        `)"],[-1,"\n    // 持續指定時間"],[1,"; // 顯示左轉圖標"],[0,"\n    basic.p"]],"start1":1254,"start2":1254,"length1":38,"length2":35},{"diffs":[[0,"ion)"],[-1,"\n    // 停止\n    stop()\n}\n// 停止：所有電機速度設為0\nfunction stop () {\n    let STOP_SPEED = 0\n    move(STOP_SPEED, STOP_SPEED, STOP_SPEED, STOP_SPEED)\n    // 顯示停止圖標\n    basic.showLeds(`\n        . . . . .\n        . . . . .\n        . # # # .\n        . . . . .\n        . . . . .\n        `)\n    basic.clearScreen()\n}"],[1,"; // 持續指定時間\n    stop(); // 停止\n}\n"],[0,"\n// "]],"start1":1299,"start2":1299,"length1":308,"length2":40},{"diffs":[[0,"urnRight"],[-1," "],[0,"(duratio"]],"start1":1377,"start2":1377,"length1":17,"length2":16},{"diffs":[[0,"ion: number)"],[1,": void"],[0," {\n    move("]],"start1":1391,"start2":1391,"length1":24,"length2":30},{"diffs":[[0,"EED)"],[-1,"\n    // 顯示右轉圖標"],[1,";"],[0,"\n   "]],"start1":1498,"start2":1498,"length1":22,"length2":9},{"diffs":[[0,"  `)"],[-1,"\n    // 持續指定時間"],[1,"; // 顯示右轉圖標"],[0,"\n   "]],"start1":1621,"start2":1621,"length1":22,"length2":19},{"diffs":[[0,"ion)"],[-1,"\n    // 停止\n    stop()\n}\n// 標籤連續檢測次數\n// 通用移動函數：控制四個"],[1,"; // 持續指定時間\n    stop(); // 停止\n}\n\n// 停止：所有"],[0,"電機"],[-1,"的"],[0,"速度"],[1,"設為0"],[0,"\nfun"]],"start1":1658,"start2":1658,"length1":63,"length2":56},{"diffs":[[0,"ion "],[-1,"move (m1Speed: number, m2Speed: number, m3Speed: number, m4Speed: number) {\n    SuperBit.MotorRunDual(\n    SuperBit.enMotors.M1,\n    m1Speed,\n    SuperBit.enMotors.M2,\n    m2Speed\n    )\n    SuperBit.MotorRunDual(\n    SuperBit.enMotors.M3,\n    m3Speed,\n    SuperBit.enMotors.M4,\n    m4Speed\n    )"],[1,"stop(): void {\n    move(STOP_SPEED, STOP_SPEED, STOP_SPEED, STOP_SPEED);\n    basic.showLeds(`\n        . . . . .\n        . . . . .\n        . # # # .\n        . . . . .\n        . . . . .\n        `); // 顯示停止圖標\n    basic.clearScreen();"],[0,"\n}\n"],[1,"\n"],[0,"// 顯"]],"start1":1716,"start2":1716,"length1":306,"length2":242},{"diffs":[[0,"rror"],[-1," "],[0,"()"],[-1," {\n    // 顯示錯誤圖標（叉形）"],[1,": void {"],[0,"\n   "]],"start1":1979,"start2":1979,"length1":31,"length2":18},{"diffs":[[0,"      `)"],[1,"; // 顯示錯誤圖標（叉形）"],[0,"\n    bas"]],"start1":2107,"start2":2107,"length1":16,"length2":31},{"diffs":[[0,"Screen()"],[1,";"],[0,"\n    sto"]],"start1":2146,"start2":2146,"length1":16,"length2":17},{"diffs":[[0,"op()"],[1,";"],[0,"\n}\n"],[-1,"let tagCount = 0\nlet state = 0\nlet TURN_BACKWARD_SPEED = 0\nlet TURN_FORWARD_SPEED = 0\nlet FORWARD_SPEED = 0\n// 電機速度常數\n// 前進速度\nFORWARD_SPEED = 105\n// 轉彎正向速度（增強動力）\nTURN_FORWARD_SPEED = 150\n// 轉彎反向速度（增強動力）\nTURN_BACKWARD_SPEED = -150\n// 停止速度\n// 轉彎持續時間（毫秒，校準為90度原地旋轉）\nlet TURN_DURATION = 600\n// 前進持續時間（毫秒）\nlet FORWARD_DURATION = 1000\n// 主循環刷新間隔（毫秒）\nlet LOOP_INTERVAL = 1000\n// 標籤連續檢測次數\nlet TAG_STABILITY_COUNT = 2\n// 初始化\n// 顯示\"對勾\"表示初始化成功"],[1,"\n// 初始化"],[0,"\nbas"]],"start1":2162,"start2":2162,"length1":443,"length2":19},{"diffs":[[0,"Yes)"],[-1,"\n// 初始化Huskylens的I2C通信"],[1,"; // 顯示\"對勾\"表示初始化成功"],[0,"\nhus"]],"start1":2203,"start2":2203,"length1":30,"length2":26},{"diffs":[[0,"2c()"],[-1,"\n// 設置標籤名稱"],[1,"; // 初始化Huskylens的I2C通信"],[0,"\nhus"]],"start1":2241,"start2":2241,"length1":18,"length2":31},{"diffs":[[0,"rd\")"],[-1,"\n// 原地左轉90度"],[1,"; // 設置標籤名稱"],[0,"\nhus"]],"start1":2298,"start2":2298,"length1":19,"length2":19},{"diffs":[[0,"ft\")"],[-1,"\n"],[1,"; "],[0,"// 原地"],[-1,"右"],[1,"左"],[0,"轉90度"]],"start1":2345,"start2":2345,"length1":15,"length2":16},{"diffs":[[0,"ht\")"],[1,"; // 原地右轉90度"],[0,"\nif (!"],[-1,"("],[0,"husk"]],"start1":2394,"start2":2394,"length1":15,"length2":26},{"diffs":[[0,"CATION))"],[-1,")"],[0," {\n   "],[1," showError();"],[0," // 初始化失"]],"start1":2467,"start2":2467,"length1":23,"length2":35},{"diffs":[[0,"    "],[-1,"showError()\n    // 進入空循環，停止程序\n    basic.forever(() => { });\n}\n// 連續檢測計數器\n// 上次檢測的標籤ID"],[1,"basic.forever(() => { }); // 進入空循環，停止程序\n}\n\nlet state = 0; // 狀態機：0=等待，1=前進，2=轉彎\nlet tagCount = 0; // 連續檢測計數器"],[0,"\nlet"]],"start1":2512,"start2":2512,"length1":93,"length2":116},{"diffs":[[0,"Tag = -1"],[-1,"\n"],[1,"; "],[0,"// 上次檢測的"]],"start1":2633,"start2":2633,"length1":17,"length2":18},{"diffs":[[0,"檢測的標籤ID\n"],[1,"\n"],[0,"// 主循環\nb"]],"start1":2648,"start2":2648,"length1":16,"length2":17},{"diffs":[[0,"equest()"],[1,";\n"],[0,"\n    // "]],"start1":2728,"start2":2728,"length1":16,"length2":18},{"diffs":[[0,"e =="],[1,"="],[0," 0) {\n"],[1,"        // 確定當前標籤\n"],[0,"    "]],"start1":2764,"start2":2764,"length1":14,"length2":33},{"diffs":[[0,"3 : -1;\n"],[1,"\n        "],[0,"// 檢查標籤穩"]],"start1":3058,"start2":3058,"length1":16,"length2":25},{"diffs":[[0,"ntTag =="],[1,"="],[0," lastTag"]],"start1":3103,"start2":3103,"length1":16,"length2":17},{"diffs":[[0,"ntTag !="],[1,"="],[0," -1) {\n "]],"start1":3129,"start2":3129,"length1":16,"length2":17},{"diffs":[[0,"ount"],[-1," += 1"],[1,"++;"],[0,"\n   "]],"start1":3161,"start2":3161,"length1":13,"length2":11},{"diffs":[[0,"ntTag =="],[1,"="],[0," 1) {\n  "]],"start1":3279,"start2":3279,"length1":16,"length2":17},{"diffs":[[0," = 1"],[-1,"\n                    // 前進1秒並停止"],[1,";"],[0,"\n   "]],"start1":3319,"start2":3319,"length1":39,"length2":9},{"diffs":[[0,"ORWARD_DURATION)"],[1,"; // 前進1秒並停止"],[0,"\n               "]],"start1":3358,"start2":3358,"length1":32,"length2":44},{"diffs":[[0,"ntTag =="],[1,"="],[0," 2) {\n  "]],"start1":3419,"start2":3419,"length1":16,"length2":17},{"diffs":[[0," = 2"],[-1,"\n                    // 原地左轉90度並停止"],[1,";"],[0,"\n   "]],"start1":3459,"start2":3459,"length1":42,"length2":9},{"diffs":[[0,"t(TURN_DURATION)"],[1,"; // 原地左轉90度並停止"],[0,"\n               "]],"start1":3492,"start2":3492,"length1":32,"length2":47},{"diffs":[[0,"ntTag =="],[1,"="],[0," 3) {\n  "]],"start1":3556,"start2":3556,"length1":16,"length2":17},{"diffs":[[0," = 2"],[-1,"\n                    // 原地右轉90度並停止"],[1,";"],[0,"\n   "]],"start1":3596,"start2":3596,"length1":42,"length2":9},{"diffs":[[0,"URATION)"],[-1,"\n                }"],[1,"; // 原地右轉90度並停止"],[0,"\n       "]],"start1":3638,"start2":3638,"length1":34,"length2":31},{"diffs":[[0,"    "],[-1,"// 返回等待狀態"],[1,"}"],[0,"\n   "]],"start1":3674,"start2":3674,"length1":17,"length2":9},{"diffs":[[0," = 0"],[-1,"\n                // 重置計數器"],[1,"; // 返回等待狀態"],[0,"\n   "]],"start1":3701,"start2":3701,"length1":33,"length2":19},{"diffs":[[0," = 0"],[-1,"\n               "],[1,";"],[0," // 重置"],[-1,"標籤"],[1,"計數器"],[0,"\n   "]],"start1":3741,"start2":3741,"length1":32,"length2":18},{"diffs":[[0,"Tag = -1"],[1,"; // 重置標籤"],[0,"\n       "]],"start1":3776,"start2":3776,"length1":16,"length2":25},{"diffs":[[0,"    "],[-1,"// 新標籤，計數從1開始\n            tagCount = 1"],[1,"tagCount = 1; // 新標籤，計數從1開始"],[0,"\n   "]],"start1":3833,"start2":3833,"length1":46,"length2":35},{"diffs":[[0,"rrentTag"],[1,";"],[0,"\n       "]],"start1":3889,"start2":3889,"length1":16,"length2":17},{"diffs":[[0,"\n           "],[1," stop();"],[0," // 未穩定檢測，保持"]],"start1":3898,"start2":3898,"length1":24,"length2":32},{"diffs":[[0,"持停止\n"],[-1,"            stop()\n"],[0,"    "]],"start1":3929,"start2":3929,"length1":27,"length2":8},{"diffs":[[0,"state =="],[1,"="],[0," 1) {\n  "]],"start1":3958,"start2":3958,"length1":16,"length2":17},{"diffs":[[0,"   state = 0"],[1,";"],[0,"\n    } else "]],"start1":4017,"start2":4017,"length1":24,"length2":25},{"diffs":[[0,"state =="],[1,"="],[0," 2) {\n  "]],"start1":4046,"start2":4046,"length1":16,"length2":17},{"diffs":[[0," = 0"],[1,";"],[0,"\n    }\n"],[1,"\n"],[0,"    "]],"start1":4120,"start2":4120,"length1":15,"length2":17},{"diffs":[[0,"VAL)"],[1,";"],[0,"\n})"],[-1,"\n"],[1,"; "]],"start1":4178,"start2":4178,"length1":8,"length2":10}]},{"type":"edited","filename":"pxt.json","patch":[{"diffs":[[0," ],\n"],[-1,"    \"testFiles\": [\n        \"test.ts\"\n    ],\n"],[0,"    "]],"start1":555,"start2":555,"length1":52,"length2":8},{"diffs":[[0,"itor\": \""],[-1,"block"],[1,"t"],[0,"sprj\"\n}\n"]],"start1":826,"start2":826,"length1":21,"length2":17}]},{"type":"added","filename":"test.ts","value":"// 在這裡測試；當此封包作為擴充功能時，將不會編譯此內容。\n"}]}],"snapshots":[{"timestamp":1747900631897,"editorVersion":"7.0.61","text":{"main.blocks":"<xml xmlns=\"https://developers.google.com/blockly/xml\"><variables><variable id=\"$WuyN0)M2d:-lg2FnOnx\">FORWARD_SPEED</variable><variable id=\"#Fqf|`mH5P**wE.WN[?q\">STOP_SPEED</variable><variable id=\"{nWc*,|2(Ee@2L=8{Vsj\">state</variable><variable id=\"_3MF4UULVNf::/JWr~A?\">currentTag</variable><variable id=\"(s,uWcs]|Jw3`J8:B)8D\">lastTag</variable><variable id=\"9_0`Hm-:aNWU/S3o10/v\">tagCount</variable><variable id=\"@{TBf!a#!`Je_-^8HIr!\">TAG_STABILITY_COUNT</variable><variable id=\"fTcMiL|L|.l26fkpgqk6\">FORWARD_DURATION</variable><variable id=\";t6$uV^I`1{bgr-7}3%%\">TURN_DURATION</variable><variable id=\"?$+!G38m!|WZx/w`H,SJ\">LOOP_INTERVAL</variable></variables><comment x=\"0\" y=\"2346\" w=\"192.01040649414062\" h=\"120\">\n狀態機：0=等待，1=前進，2=轉彎\n</comment><block type=\"pxt-on-start\" x=\"0\" y=\"0\"><statement name=\"HANDLER\"><block type=\"variables_set\"><field name=\"VAR\" id=\"$WuyN0)M2d:-lg2FnOnx\">FORWARD_SPEED</field><comment pinned=\"false\" h=\"80\" w=\"160\">電機速度常數\n前進速度</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">150</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\";t6$uV^I`1{bgr-7}3%%\">TURN_DURATION</field><comment pinned=\"false\" h=\"80\" w=\"160\">停止速度\n轉彎持續時間</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">1000</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"fTcMiL|L|.l26fkpgqk6\">FORWARD_DURATION</field><comment pinned=\"false\" h=\"80\" w=\"160\">前進持續時間（毫秒）</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">1000</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"?$+!G38m!|WZx/w`H,SJ\">LOOP_INTERVAL</field><comment pinned=\"false\" h=\"80\" w=\"160\">主循環刷新間隔（毫秒）</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">1000</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"@{TBf!a#!`Je_-^8HIr!\">TAG_STABILITY_COUNT</field><comment pinned=\"false\" h=\"80\" w=\"160\">標籤連續檢測次數</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">2</field></shadow></value><next><block type=\"basic_show_icon\"><field name=\"i\">IconNames.Yes</field><comment pinned=\"false\" h=\"80\" w=\"160\">初始化\n顯示\"對勾\"表示初始化成功</comment><next><block type=\"huskylens_initI2c\"><comment pinned=\"false\" h=\"80\" w=\"160\">初始化Huskylens的I2C通信</comment><next><block type=\"huskylens_writeName\"><comment pinned=\"false\" h=\"80\" w=\"160\">設置標籤名稱</comment><value name=\"id\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value><value name=\"name\"><shadow type=\"text\"><field name=\"TEXT\">Forward</field></shadow></value><next><block type=\"huskylens_writeName\"><comment pinned=\"false\" h=\"80\" w=\"160\">原地左轉90度</comment><value name=\"id\"><shadow type=\"math_number\"><field name=\"NUM\">2</field></shadow></value><value name=\"name\"><shadow type=\"text\"><field name=\"TEXT\">Turn Left</field></shadow></value><next><block type=\"huskylens_writeName\"><comment pinned=\"false\" h=\"80\" w=\"160\">原地右轉90度</comment><value name=\"id\"><shadow type=\"math_number\"><field name=\"NUM\">3</field></shadow></value><value name=\"name\"><shadow type=\"text\"><field name=\"TEXT\">Turn Right</field></shadow></value><next><block type=\"controls_if\"><data>{\"commentRefs\":[],\"fieldData\":{}}</data><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_negate\"><value name=\"BOOL\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"typescript_expression\"><field name=\"EXPRESSION\">huskylens.initMode(protocolAlgorithm.OBJECTCLASSIFICATION)</field></block></value></block></value><statement name=\"DO0\"><block type=\"function_call\"><mutation name=\"showError\" functionid=\"+Eh,d!mi2$;M;O0F)BN?\"></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">初始化失敗，顯示錯誤並停止</comment><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"basic.forever(() =&gt; { });\" numlines=\"1\"></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">進入空循環，停止程序</comment></block></next></block></statement><next><block type=\"variables_set\"><field name=\"VAR\" id=\"(s,uWcs]|Jw3`J8:B)8D\">lastTag</field><comment pinned=\"false\" h=\"80\" w=\"160\">連續檢測計數器\n上次檢測的標籤ID</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">-1</field></shadow></value></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type=\"device_button_event\" x=\"739\" y=\"0\"><field name=\"NAME\">Button.A</field><comment pinned=\"false\" h=\"80\" w=\"160\">校準按鈕（用於調整轉彎時間）</comment><statement name=\"HANDLER\"><block type=\"variables_change\"><field name=\"VAR\" id=\";t6$uV^I`1{bgr-7}3%%\">TURN_DURATION</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">50</field></shadow></value><next><block type=\"device_show_number\"><value name=\"number\"><block type=\"variables_get\"><field name=\"VAR\" id=\";t6$uV^I`1{bgr-7}3%%\">TURN_DURATION</field></block></value><next><block type=\"device_clear_display\"></block></next></block></next></block></statement></block><block type=\"device_button_event\" x=\"1121\" y=\"0\"><field name=\"NAME\">Button.B</field><statement name=\"HANDLER\"><block type=\"variables_set\"><field name=\"VAR\" id=\";t6$uV^I`1{bgr-7}3%%\">TURN_DURATION</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_op2\"><field name=\"op\">max</field><value name=\"x\"><shadow type=\"math_number\"><field name=\"NUM\">100</field></shadow></value><value name=\"y\"><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\";t6$uV^I`1{bgr-7}3%%\">TURN_DURATION</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">50</field></shadow></value></block></value></block></value><next><block type=\"device_show_number\"><value name=\"number\"><block type=\"variables_get\"><field name=\"VAR\" id=\";t6$uV^I`1{bgr-7}3%%\">TURN_DURATION</field></block></value><next><block type=\"device_clear_display\"></block></next></block></next></block></statement></block><block type=\"device_button_event\" x=\"1929\" y=\"0\"><field name=\"NAME\">Button.AB</field><statement name=\"HANDLER\"><block type=\"function_call\"><mutation name=\"turnLeft\" functionid=\"?|-~$Q0TUT+9;hSk%;1g\"><arg name=\"duration\" id=\"pr293nj37f0enesamhrw3o\" type=\"number\"></arg></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">測試左轉</comment><value name=\"pr293nj37f0enesamhrw3o\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\";t6$uV^I`1{bgr-7}3%%\">TURN_DURATION</field></block></value><next><block type=\"device_pause\"><data>{\"commentRefs\":[],\"fieldData\":{}}</data><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">1000</field></shadow></value><next><block type=\"function_call\"><mutation name=\"turnRight\" functionid=\"}|CY6gfa8V@Nfeb0*OGH\"><arg name=\"duration\" id=\"8a9ci55145fvbqqb274zll\" type=\"number\"></arg></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">測試右轉</comment><value name=\"8a9ci55145fvbqqb274zll\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\";t6$uV^I`1{bgr-7}3%%\">TURN_DURATION</field></block></value></block></next></block></next></block></statement></block><block type=\"device_forever\" x=\"2340\" y=\"0\"><comment pinned=\"false\" h=\"80\" w=\"160\">上次檢測的標籤ID\n主循環</comment><statement name=\"HANDLER\"><block type=\"huskylens_request\"><comment pinned=\"false\" h=\"80\" w=\"160\">獲取Huskylens數據</comment><next><block type=\"controls_if\"><mutation elseif=\"2\"></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">狀態機邏輯</comment><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"{nWc*,|2(Ee@2L=8{Vsj\">state</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"let currentTag = huskylens.isAppear(1, HUSKYLENSResultType_t.HUSKYLENSResultBlock) ? 1 :\" line1=\"            huskylens.isAppear(2, HUSKYLENSResultType_t.HUSKYLENSResultBlock) ? 2 :\" line2=\"                huskylens.isAppear(3, HUSKYLENSResultType_t.HUSKYLENSResultBlock) ? 3 : -1;\" numlines=\"3\" declaredvars=\"currentTag\"></mutation><next><block type=\"controls_if\"><mutation else=\"1\"></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">檢查標籤穩定性</comment><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_operation\"><field name=\"OP\">AND</field><value name=\"A\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"_3MF4UULVNf::/JWr~A?\">currentTag</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"(s,uWcs]|Jw3`J8:B)8D\">lastTag</field></block></value></block></value><value name=\"B\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">NEQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"_3MF4UULVNf::/JWr~A?\">currentTag</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">-1</field></shadow></value></block></value></block></value><statement name=\"DO0\"><block type=\"variables_change\"><field name=\"VAR\" id=\"9_0`Hm-:aNWU/S3o10/v\">tagCount</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value><next><block type=\"controls_if\"><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">GTE</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"9_0`Hm-:aNWU/S3o10/v\">tagCount</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"@{TBf!a#!`Je_-^8HIr!\">TAG_STABILITY_COUNT</field></block></value></block></value><statement name=\"DO0\"><block type=\"controls_if\"><mutation elseif=\"2\"></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">穩定檢測到標籤，執行對應動作</comment><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"_3MF4UULVNf::/JWr~A?\">currentTag</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"variables_set\"><field name=\"VAR\" id=\"{nWc*,|2(Ee@2L=8{Vsj\">state</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value><next><block type=\"function_call\"><mutation name=\"moveForward\" functionid=\"TrL?^A`EcTR*v[n9@^`H\"><arg name=\"duration\" id=\"m26gchjybkr37kmptjmuj\" type=\"number\"></arg></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">前進1秒並停止</comment><value name=\"m26gchjybkr37kmptjmuj\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"fTcMiL|L|.l26fkpgqk6\">FORWARD_DURATION</field></block></value></block></next></block></statement><value name=\"IF1\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"_3MF4UULVNf::/JWr~A?\">currentTag</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">2</field></shadow></value></block></value><statement name=\"DO1\"><block type=\"variables_set\"><field name=\"VAR\" id=\"{nWc*,|2(Ee@2L=8{Vsj\">state</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">2</field></shadow></value><next><block type=\"function_call\"><mutation name=\"turnLeft\" functionid=\"?|-~$Q0TUT+9;hSk%;1g\"><arg name=\"duration\" id=\"pr293nj37f0enesamhrw3o\" type=\"number\"></arg></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">原地左轉90度並停止</comment><value name=\"pr293nj37f0enesamhrw3o\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\";t6$uV^I`1{bgr-7}3%%\">TURN_DURATION</field></block></value></block></next></block></statement><value name=\"IF2\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"_3MF4UULVNf::/JWr~A?\">currentTag</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">3</field></shadow></value></block></value><statement name=\"DO2\"><block type=\"variables_set\"><field name=\"VAR\" id=\"{nWc*,|2(Ee@2L=8{Vsj\">state</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">2</field></shadow></value><next><block type=\"function_call\"><mutation name=\"turnRight\" functionid=\"}|CY6gfa8V@Nfeb0*OGH\"><arg name=\"duration\" id=\"8a9ci55145fvbqqb274zll\" type=\"number\"></arg></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">原地右轉90度並停止</comment><value name=\"8a9ci55145fvbqqb274zll\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\";t6$uV^I`1{bgr-7}3%%\">TURN_DURATION</field></block></value></block></next></block></statement><next><block type=\"variables_set\"><field name=\"VAR\" id=\"{nWc*,|2(Ee@2L=8{Vsj\">state</field><comment pinned=\"false\" h=\"80\" w=\"160\">返回等待狀態</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"9_0`Hm-:aNWU/S3o10/v\">tagCount</field><comment pinned=\"false\" h=\"80\" w=\"160\">重置計數器</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"(s,uWcs]|Jw3`J8:B)8D\">lastTag</field><comment pinned=\"false\" h=\"80\" w=\"160\">重置標籤</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">-1</field></shadow></value></block></next></block></next></block></next></block></statement></block></next></block></statement><statement name=\"ELSE\"><block type=\"variables_set\"><field name=\"VAR\" id=\"9_0`Hm-:aNWU/S3o10/v\">tagCount</field><comment pinned=\"false\" h=\"80\" w=\"160\">新標籤，計數從1開始</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"(s,uWcs]|Jw3`J8:B)8D\">lastTag</field><data>{\"commentRefs\":[],\"fieldData\":{}}</data><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"_3MF4UULVNf::/JWr~A?\">currentTag</field></block></value><next><block type=\"function_call\"><mutation name=\"stop\" functionid=\"?4+eAizuu$sFlr]hLKqA\"></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">未穩定檢測，保持停止</comment></block></next></block></next></block></statement></block></next></block></statement><value name=\"IF1\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"{nWc*,|2(Ee@2L=8{Vsj\">state</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><statement name=\"DO1\"><block type=\"variables_set\"><field name=\"VAR\" id=\"{nWc*,|2(Ee@2L=8{Vsj\">state</field><comment pinned=\"false\" h=\"80\" w=\"160\">前進狀態在moveForward中完成，立即返回狀態0</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></statement><value name=\"IF2\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"{nWc*,|2(Ee@2L=8{Vsj\">state</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">2</field></shadow></value></block></value><statement name=\"DO2\"><block type=\"variables_set\"><field name=\"VAR\" id=\"{nWc*,|2(Ee@2L=8{Vsj\">state</field><comment pinned=\"false\" h=\"80\" w=\"160\">轉彎狀態在turnLeft或turnRight中完成，立即返回狀態0</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></statement><next><block type=\"device_pause\"><comment pinned=\"false\" h=\"80\" w=\"160\">限制刷新頻率為每秒一次</comment><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">NaN</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"?$+!G38m!|WZx/w`H,SJ\">LOOP_INTERVAL</field></block></value></block></next></block></next></block></statement></block><block type=\"function_definition\" x=\"0\" y=\"1731\"><mutation name=\"move\" functionid=\"@cM}KgB3t*S;R92v2B_T\"><arg name=\"m1Speed\" id=\"bpeuarhfvp25ufrnennj\" type=\"number\"></arg><arg name=\"m2Speed\" id=\"7uw55jww6jkktezwwdx0s\" type=\"number\"></arg><arg name=\"m3Speed\" id=\"stfaf64isb17kb1d8esu\" type=\"number\"></arg><arg name=\"m4Speed\" id=\"y30fci46a9wdhct1fqza\" type=\"number\"></arg></mutation><field name=\"function_name\">move</field><comment pinned=\"false\" h=\"80\" w=\"160\">標籤連續檢測次數\n通用移動函數：控制四個電機的速度</comment><value name=\"bpeuarhfvp25ufrnennj\"><block type=\"argument_reporter_number\"><mutation duplicateondrag=\"true\"></mutation><field name=\"VALUE\">m1Speed</field></block></value><value name=\"7uw55jww6jkktezwwdx0s\"><block type=\"argument_reporter_number\"><mutation duplicateondrag=\"true\"></mutation><field name=\"VALUE\">m2Speed</field></block></value><value name=\"stfaf64isb17kb1d8esu\"><block type=\"argument_reporter_number\"><mutation duplicateondrag=\"true\"></mutation><field name=\"VALUE\">m3Speed</field></block></value><value name=\"y30fci46a9wdhct1fqza\"><block type=\"argument_reporter_number\"><mutation duplicateondrag=\"true\"></mutation><field name=\"VALUE\">m4Speed</field></block></value><statement name=\"STACK\"><block type=\"SuperBit_MotorRunDual\"><field name=\"motor1\">SuperBit.enMotors.M1</field><field name=\"motor2\">SuperBit.enMotors.M2</field><value name=\"speed1\"><shadow type=\"math_number_minmax\"><mutation min=\"-255\" max=\"255\" precision=\"0\"></mutation><field name=\"SLIDER\">0</field></shadow><block type=\"argument_reporter_number\"><field name=\"VALUE\">m1Speed</field></block></value><value name=\"speed2\"><shadow type=\"math_number_minmax\"><mutation min=\"-255\" max=\"255\" precision=\"0\"></mutation><field name=\"SLIDER\">0</field></shadow><block type=\"argument_reporter_number\"><field name=\"VALUE\">m2Speed</field></block></value><next><block type=\"SuperBit_MotorRunDual\"><field name=\"motor1\">SuperBit.enMotors.M3</field><field name=\"motor2\">SuperBit.enMotors.M4</field><value name=\"speed1\"><shadow type=\"math_number_minmax\"><mutation min=\"-255\" max=\"255\" precision=\"0\"></mutation><field name=\"SLIDER\">0</field></shadow><block type=\"argument_reporter_number\"><field name=\"VALUE\">m3Speed</field></block></value><value name=\"speed2\"><shadow type=\"math_number_minmax\"><mutation min=\"-255\" max=\"255\" precision=\"0\"></mutation><field name=\"SLIDER\">0</field></shadow><block type=\"argument_reporter_number\"><field name=\"VALUE\">m4Speed</field></block></value></block></next></block></statement></block><block type=\"function_definition\" x=\"654\" y=\"1731\"><mutation name=\"moveForward\" functionid=\"TrL?^A`EcTR*v[n9@^`H\"><arg name=\"duration\" id=\"m26gchjybkr37kmptjmuj\" type=\"number\"></arg></mutation><field name=\"function_name\">moveForward</field><comment pinned=\"false\" h=\"80\" w=\"160\">前進：所有電機以正向速度運行指定時間</comment><value name=\"m26gchjybkr37kmptjmuj\"><block type=\"argument_reporter_number\"><mutation duplicateondrag=\"true\"></mutation><field name=\"VALUE\">duration</field></block></value><statement name=\"STACK\"><block type=\"function_call\"><mutation name=\"move\" functionid=\"@cM}KgB3t*S;R92v2B_T\"><arg name=\"m1Speed\" id=\"bpeuarhfvp25ufrnennj\" type=\"number\"></arg><arg name=\"m2Speed\" id=\"7uw55jww6jkktezwwdx0s\" type=\"number\"></arg><arg name=\"m3Speed\" id=\"stfaf64isb17kb1d8esu\" type=\"number\"></arg><arg name=\"m4Speed\" id=\"y30fci46a9wdhct1fqza\" type=\"number\"></arg></mutation><value name=\"bpeuarhfvp25ufrnennj\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"$WuyN0)M2d:-lg2FnOnx\">FORWARD_SPEED</field></block></value><value name=\"7uw55jww6jkktezwwdx0s\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"$WuyN0)M2d:-lg2FnOnx\">FORWARD_SPEED</field></block></value><value name=\"stfaf64isb17kb1d8esu\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"$WuyN0)M2d:-lg2FnOnx\">FORWARD_SPEED</field></block></value><value name=\"y30fci46a9wdhct1fqza\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"$WuyN0)M2d:-lg2FnOnx\">FORWARD_SPEED</field></block></value><next><block type=\"device_show_leds\"><field name=\"LEDS\">`\n        . . # . . \n        . # # # . \n        # . # . # \n        . . # . . \n        . . # . .\n        `</field><comment pinned=\"false\" h=\"80\" w=\"160\">顯示前進圖標</comment><next><block type=\"device_pause\"><comment pinned=\"false\" h=\"80\" w=\"160\">持續指定時間</comment><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">NaN</field></shadow><block type=\"argument_reporter_number\"><field name=\"VALUE\">duration</field></block></value><next><block type=\"function_call\"><mutation name=\"stop\" functionid=\"?4+eAizuu$sFlr]hLKqA\"></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">停止</comment></block></next></block></next></block></next></block></statement></block><block type=\"function_definition\" x=\"1523\" y=\"1731\"><mutation name=\"turnLeft\" functionid=\"?|-~$Q0TUT+9;hSk%;1g\"><arg name=\"duration\" id=\"pr293nj37f0enesamhrw3o\" type=\"number\"></arg></mutation><field name=\"function_name\">turnLeft</field><comment pinned=\"false\" h=\"80\" w=\"160\">左轉</comment><value name=\"pr293nj37f0enesamhrw3o\"><block type=\"argument_reporter_number\"><mutation duplicateondrag=\"true\"></mutation><field name=\"VALUE\">duration</field></block></value><statement name=\"STACK\"><block type=\"function_call\"><mutation name=\"move\" functionid=\"@cM}KgB3t*S;R92v2B_T\"><arg name=\"m1Speed\" id=\"bpeuarhfvp25ufrnennj\" type=\"number\"></arg><arg name=\"m2Speed\" id=\"7uw55jww6jkktezwwdx0s\" type=\"number\"></arg><arg name=\"m3Speed\" id=\"stfaf64isb17kb1d8esu\" type=\"number\"></arg><arg name=\"m4Speed\" id=\"y30fci46a9wdhct1fqza\" type=\"number\"></arg></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">手動插入速度值</comment><value name=\"bpeuarhfvp25ufrnennj\"><shadow type=\"math_number\"><field name=\"NUM\">150</field></shadow></value><value name=\"7uw55jww6jkktezwwdx0s\"><shadow type=\"math_number\"><field name=\"NUM\">-200</field></shadow></value><value name=\"stfaf64isb17kb1d8esu\"><shadow type=\"math_number\"><field name=\"NUM\">150</field></shadow></value><value name=\"y30fci46a9wdhct1fqza\"><shadow type=\"math_number\"><field name=\"NUM\">150</field></shadow></value><next><block type=\"device_show_leds\"><field name=\"LEDS\">`\n        . . # . . \n        . # . . . \n        # # # # # \n        . # . . . \n        . . # . .\n        `</field><comment pinned=\"false\" h=\"80\" w=\"160\">顯示左轉圖標</comment><next><block type=\"device_pause\"><comment pinned=\"false\" h=\"80\" w=\"160\">持續指定時間</comment><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">NaN</field></shadow><block type=\"argument_reporter_number\"><field name=\"VALUE\">duration</field></block></value><next><block type=\"function_call\"><mutation name=\"stop\" functionid=\"?4+eAizuu$sFlr]hLKqA\"></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">停止</comment></block></next></block></next></block></next></block></statement></block><block type=\"function_definition\" x=\"1963\" y=\"1731\"><mutation name=\"turnRight\" functionid=\"}|CY6gfa8V@Nfeb0*OGH\"><arg name=\"duration\" id=\"8a9ci55145fvbqqb274zll\" type=\"number\"></arg></mutation><field name=\"function_name\">turnRight</field><comment pinned=\"false\" h=\"80\" w=\"160\">右轉</comment><value name=\"8a9ci55145fvbqqb274zll\"><block type=\"argument_reporter_number\"><mutation duplicateondrag=\"true\"></mutation><field name=\"VALUE\">duration</field></block></value><statement name=\"STACK\"><block type=\"function_call\"><mutation name=\"move\" functionid=\"@cM}KgB3t*S;R92v2B_T\"><arg name=\"m1Speed\" id=\"bpeuarhfvp25ufrnennj\" type=\"number\"></arg><arg name=\"m2Speed\" id=\"7uw55jww6jkktezwwdx0s\" type=\"number\"></arg><arg name=\"m3Speed\" id=\"stfaf64isb17kb1d8esu\" type=\"number\"></arg><arg name=\"m4Speed\" id=\"y30fci46a9wdhct1fqza\" type=\"number\"></arg></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">手動插入速度值</comment><value name=\"bpeuarhfvp25ufrnennj\"><shadow type=\"math_number\"><field name=\"NUM\">150</field></shadow></value><value name=\"7uw55jww6jkktezwwdx0s\"><shadow type=\"math_number\"><field name=\"NUM\">150</field></shadow></value><value name=\"stfaf64isb17kb1d8esu\"><shadow type=\"math_number\"><field name=\"NUM\">-200</field></shadow></value><value name=\"y30fci46a9wdhct1fqza\"><shadow type=\"math_number\"><field name=\"NUM\">150</field></shadow></value><next><block type=\"device_show_leds\"><field name=\"LEDS\">`\n        . . # . . \n        . . . # . \n        # # # # # \n        . . . # . \n        . . # . .\n        `</field><comment pinned=\"false\" h=\"80\" w=\"160\">顯示右轉圖標</comment><next><block type=\"device_pause\"><comment pinned=\"false\" h=\"80\" w=\"160\">持續指定時間</comment><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">NaN</field></shadow><block type=\"argument_reporter_number\"><field name=\"VALUE\">duration</field></block></value><next><block type=\"function_call\"><mutation name=\"stop\" functionid=\"?4+eAizuu$sFlr]hLKqA\"></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">停止</comment></block></next></block></next></block></next></block></statement></block><block type=\"function_definition\" x=\"2402\" y=\"1731\"><mutation name=\"stop\" functionid=\"?4+eAizuu$sFlr]hLKqA\"></mutation><field name=\"function_name\">stop</field><comment pinned=\"false\" h=\"80\" w=\"160\">停止：所有電機速度設為0</comment><statement name=\"STACK\"><block type=\"function_call\"><mutation name=\"move\" functionid=\"@cM}KgB3t*S;R92v2B_T\"><arg name=\"m1Speed\" id=\"bpeuarhfvp25ufrnennj\" type=\"number\"></arg><arg name=\"m2Speed\" id=\"7uw55jww6jkktezwwdx0s\" type=\"number\"></arg><arg name=\"m3Speed\" id=\"stfaf64isb17kb1d8esu\" type=\"number\"></arg><arg name=\"m4Speed\" id=\"y30fci46a9wdhct1fqza\" type=\"number\"></arg></mutation><value name=\"bpeuarhfvp25ufrnennj\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"#Fqf|`mH5P**wE.WN[?q\">STOP_SPEED</field></block></value><value name=\"7uw55jww6jkktezwwdx0s\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"#Fqf|`mH5P**wE.WN[?q\">STOP_SPEED</field></block></value><value name=\"stfaf64isb17kb1d8esu\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"#Fqf|`mH5P**wE.WN[?q\">STOP_SPEED</field></block></value><value name=\"y30fci46a9wdhct1fqza\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"#Fqf|`mH5P**wE.WN[?q\">STOP_SPEED</field></block></value><next><block type=\"device_show_leds\"><field name=\"LEDS\">`\n        . . . . . \n        . . . . . \n        . # # # . \n        . . . . . \n        . . . . .\n        `</field><comment pinned=\"false\" h=\"80\" w=\"160\">顯示停止圖標</comment><next><block type=\"device_clear_display\"><data>{\"commentRefs\":[],\"fieldData\":{}}</data></block></next></block></next></block></statement></block><block type=\"function_definition\" x=\"3156\" y=\"1731\"><mutation name=\"showError\" functionid=\"+Eh,d!mi2$;M;O0F)BN?\"></mutation><field name=\"function_name\">showError</field><comment pinned=\"false\" h=\"80\" w=\"160\">顯示錯誤並停止</comment><statement name=\"STACK\"><block type=\"device_show_leds\"><field name=\"LEDS\">`\n        # . . . # \n        . # . # . \n        . . # . . \n        . # . # . \n        # . . . #\n        `</field><comment pinned=\"false\" h=\"80\" w=\"160\">顯示錯誤圖標（叉形）</comment><next><block type=\"device_clear_display\"><data>{\"commentRefs\":[],\"fieldData\":{}}</data><next><block type=\"function_call\"><mutation name=\"stop\" functionid=\"?4+eAizuu$sFlr]hLKqA\"></mutation></block></next></block></next></block></statement></block></xml>","main.ts":"// 電機速度常數\nconst FORWARD_SPEED = 105; // 前進速度\nconst TURN_FORWARD_SPEED = 150; // 轉彎正向速度（增強動力）\nconst TURN_BACKWARD_SPEED = -150; // 轉彎反向速度（增強動力）\nconst STOP_SPEED = 0; // 停止速度\nconst TURN_DURATION = 600; // 轉彎持續時間（毫秒，校準為90度原地旋轉）\nconst FORWARD_DURATION = 1000; // 前進持續時間（毫秒）\nconst LOOP_INTERVAL = 1000; // 主循環刷新間隔（毫秒）\nconst TAG_STABILITY_COUNT = 2; // 標籤連續檢測次數\n\n// 通用移動函數：控制四個電機的速度\nfunction move(m1Speed: number, m2Speed: number, m3Speed: number, m4Speed: number): void {\n    SuperBit.MotorRunDual(SuperBit.enMotors.M1, m1Speed, SuperBit.enMotors.M2, m2Speed);\n    SuperBit.MotorRunDual(SuperBit.enMotors.M3, m3Speed, SuperBit.enMotors.M4, m4Speed);\n}\n\n// 前進：所有電機以正向速度運行指定時間\nfunction moveForward(duration: number): void {\n    move(FORWARD_SPEED, FORWARD_SPEED, FORWARD_SPEED, FORWARD_SPEED);\n    basic.showLeds(`\n        . . # . .\n        . # # # .\n        # . # . #\n        . . # . .\n        . . # . .\n        `); // 顯示前進圖標\n    basic.pause(duration); // 持續指定時間\n    stop(); // 停止\n}\n\n// 左轉：M1和M4反轉，M2和M3正轉（原地左轉90度）\nfunction turnLeft(duration: number): void {\n    move(TURN_BACKWARD_SPEED, TURN_FORWARD_SPEED, TURN_FORWARD_SPEED, TURN_BACKWARD_SPEED);\n    basic.showLeds(`\n        . . # . .\n        . # . . .\n        # # # # #\n        . # . . .\n        . . # . .\n        `); // 顯示左轉圖標\n    basic.pause(duration); // 持續指定時間\n    stop(); // 停止\n}\n\n// 右轉：M1和M4正轉，M2和M3反轉（原地右轉90度）\nfunction turnRight(duration: number): void {\n    move(TURN_FORWARD_SPEED, TURN_BACKWARD_SPEED, TURN_BACKWARD_SPEED, TURN_FORWARD_SPEED);\n    basic.showLeds(`\n        . . # . .\n        . . . # .\n        # # # # #\n        . . . # .\n        . . # . .\n        `); // 顯示右轉圖標\n    basic.pause(duration); // 持續指定時間\n    stop(); // 停止\n}\n\n// 停止：所有電機速度設為0\nfunction stop(): void {\n    move(STOP_SPEED, STOP_SPEED, STOP_SPEED, STOP_SPEED);\n    basic.showLeds(`\n        . . . . .\n        . . . . .\n        . # # # .\n        . . . . .\n        . . . . .\n        `); // 顯示停止圖標\n    basic.clearScreen();\n}\n\n// 顯示錯誤並停止\nfunction showError(): void {\n    basic.showLeds(`\n        # . . . #\n        . # . # .\n        . . # . .\n        . # . # .\n        # . . . #\n        `); // 顯示錯誤圖標（叉形）\n    basic.clearScreen();\n    stop();\n}\n\n// 初始化\nbasic.showIcon(IconNames.Yes); // 顯示\"對勾\"表示初始化成功\nhuskylens.initI2c(); // 初始化Huskylens的I2C通信\nhuskylens.writeName(1, \"Forward\"); // 設置標籤名稱\nhuskylens.writeName(2, \"Turn Left\"); // 原地左轉90度\nhuskylens.writeName(3, \"Turn Right\"); // 原地右轉90度\nif (!huskylens.initMode(protocolAlgorithm.OBJECTCLASSIFICATION)) {\n    showError(); // 初始化失敗，顯示錯誤並停止\n    basic.forever(() => { }); // 進入空循環，停止程序\n}\n\nlet state = 0; // 狀態機：0=等待，1=前進，2=轉彎\nlet tagCount = 0; // 連續檢測計數器\nlet lastTag = -1; // 上次檢測的標籤ID\n\n// 主循環\nbasic.forever(function () {\n    // 獲取Huskylens數據\n    huskylens.request();\n\n    // 狀態機邏輯\n    if (state === 0) {\n        // 確定當前標籤\n        let currentTag = huskylens.isAppear(1, HUSKYLENSResultType_t.HUSKYLENSResultBlock) ? 1 :\n            huskylens.isAppear(2, HUSKYLENSResultType_t.HUSKYLENSResultBlock) ? 2 :\n                huskylens.isAppear(3, HUSKYLENSResultType_t.HUSKYLENSResultBlock) ? 3 : -1;\n\n        // 檢查標籤穩定性\n        if (currentTag === lastTag && currentTag !== -1) {\n            tagCount++;\n            if (tagCount >= TAG_STABILITY_COUNT) {\n                // 穩定檢測到標籤，執行對應動作\n                if (currentTag === 1) {\n                    state = 1;\n                    moveForward(FORWARD_DURATION); // 前進1秒並停止\n                } else if (currentTag === 2) {\n                    state = 2;\n                    turnLeft(TURN_DURATION); // 原地左轉90度並停止\n                } else if (currentTag === 3) {\n                    state = 2;\n                    turnRight(TURN_DURATION); // 原地右轉90度並停止\n                }\n                state = 0; // 返回等待狀態\n                tagCount = 0; // 重置計數器\n                lastTag = -1; // 重置標籤\n            }\n        } else {\n            tagCount = 1; // 新標籤，計數從1開始\n            lastTag = currentTag;\n            stop(); // 未穩定檢測，保持停止\n        }\n    } else if (state === 1) {\n        // 前進狀態在moveForward中完成，立即返回狀態0\n        state = 0;\n    } else if (state === 2) {\n        // 轉彎狀態在turnLeft或turnRight中完成，立即返回狀態0\n        state = 0;\n    }\n\n    // 限制刷新頻率為每秒一次\n    basic.pause(LOOP_INTERVAL);\n}); ","README.md":"","main.py":"def L():\n    SuperBit.motor_run_dual(SuperBit.enMotors.M1, n, SuperBit.enMotors.M2, p)\n    SuperBit.motor_run_dual(SuperBit.enMotors.M3, p, SuperBit.enMotors.M4, n)\n\ndef on_gesture_logo_up():\n    radio.send_number(2)\ninput.on_gesture(Gesture.LOGO_UP, on_gesture_logo_up)\n\ndef on_gesture_logo_down():\n    radio.send_number(1)\ninput.on_gesture(Gesture.LOGO_DOWN, on_gesture_logo_down)\n\ndef on_received_number(receivedNumber):\n    if receivedNumber == 1:\n        basic.show_arrow(ArrowNames.NORTH)\n        F()\n    elif receivedNumber == 2:\n        basic.show_arrow(ArrowNames.SOUTH)\n        B()\n    elif receivedNumber == 3:\n        basic.show_arrow(ArrowNames.WEST)\n        L()\n    elif receivedNumber == 4:\n        basic.show_arrow(ArrowNames.EAST)\n        R()\n    else:\n        basic.show_icon(IconNames.ANGRY)\nradio.on_received_number(on_received_number)\n\ndef on_gesture_tilt_left():\n    radio.send_number(3)\ninput.on_gesture(Gesture.TILT_LEFT, on_gesture_tilt_left)\n\ndef F():\n    SuperBit.motor_run_dual(SuperBit.enMotors.M1, p, SuperBit.enMotors.M2, p)\n    SuperBit.motor_run_dual(SuperBit.enMotors.M3, p, SuperBit.enMotors.M4, p)\ndef B():\n    SuperBit.motor_run_dual(SuperBit.enMotors.M1, n, SuperBit.enMotors.M2, n)\n    SuperBit.motor_run_dual(SuperBit.enMotors.M3, n, SuperBit.enMotors.M4, n)\ndef R():\n    SuperBit.motor_run_dual(SuperBit.enMotors.M1, p, SuperBit.enMotors.M2, n)\n    SuperBit.motor_run_dual(SuperBit.enMotors.M3, n, SuperBit.enMotors.M4, p)\n\ndef on_gesture_tilt_right():\n    radio.send_number(4)\ninput.on_gesture(Gesture.TILT_RIGHT, on_gesture_tilt_right)\n\nn = 0\np = 0\nbasic.show_icon(IconNames.HEART)\nradio.set_group(123)\np = 180\nn = -180\n\ndef on_forever():\n    pass\nbasic.forever(on_forever)\n","pxt.json":"{\n    \"name\": \"AICar_TurnLRStop_variable_ok\",\n    \"description\": \"\",\n    \"dependencies\": {\n        \"core\": \"*\",\n        \"radio\": \"*\",\n        \"microphone\": \"*\",\n        \"SuperBit\": \"github:lzty634158/SuperBit#0a0d6cd2c18804f6b56e944d0c7ff7bd91473ec8\",\n        \"Huskylens\": \"github:dfrobot/pxt-dfrobot_huskylens#v2.0.5\",\n        \"MaqueenPlus\": \"github:dfrobot/pxt-dfrobot-maqueenplus#v1.5.0\",\n        \"pxt-sonar\": \"github:microsoft/pxt-sonar#v0.0.5\"\n    },\n    \"files\": [\n        \"main.blocks\",\n        \"main.ts\",\n        \"README.md\",\n        \"main.py\"\n    ],\n    \"targetVersions\": {\n        \"branch\": \"v4.0.16\",\n        \"tag\": \"v4.0.16\",\n        \"commits\": \"https://github.com/microsoft/pxt-microbit/commits/04b1a5492fb75af626caed5601ee8d794d970dd7\",\n        \"target\": \"4.0.16\",\n        \"pxt\": \"7.0.12\"\n    },\n    \"preferredEditor\": \"tsprj\"\n}\n"}}],"shares":[],"lastSaveTime":1747900647590}